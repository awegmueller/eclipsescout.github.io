<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"  
  "http://www.w3.org/TR/html4/loose.dtd">  
<html > 
<head><title>5 A Larger Example</title> 
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"> 
<meta name="generator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<meta name="originator" content="TeX4ht (http://www.cse.ohio-state.edu/~gurari/TeX4ht/)"> 
<!-- html,2,info --> 
<meta name="src" content="book.tex"> 
<meta name="date" content="2014-02-26 16:18:00"> 
<link rel="stylesheet" type="text/css" href="book.css"> 
</head><body 
>
    <!--l. 15--><div class="crosslinks"><p class="noindent">[<a 
href="bookch5.html" >prev</a>] [<a 
href="bookch5.html#tailbookch5.html" >prev-tail</a>] [<a 
href="#tailbookch6.html">tail</a>] [<a 
href="bookpa1.html#bookch6.html" >up</a>] </p></div>
    <h2 class="chapterHead"><span class="titlemark">Chapter&#x00A0;5</span><br /><a 
 id="x74-620005"></a>A Larger Example</h2>
<!--l. 18--><p class="noindent" >In this chapter we will create the &#8221;My Contacts&#8221; Scout application. This
small<span class="footnote-mark"><a 
href="book75.html#fn1x7"><sup class="textsuperscript">1</sup></a></span><a 
 id="x74-62001f1"></a> 
application covers additional aspects of the Eclipse Scout framework. The presented demo
application borrows heavily from a Scout tutorial published 2012 in the German <span 
class="cmti-10">Java</span>
<span 
class="cmti-10">Magazin</span><span class="footnote-mark"><a 
href="book76.html#fn2x7"><sup class="textsuperscript">2</sup></a></span><a 
 id="x74-62002f2"></a> 
for the Scout release 3.8 (Juno). Compared to the 2012 tutorial, the version presented in this chapter has
been slightly polished and updated to the Scout release 3.9 (Kepler).
<!--l. 28--><p class="indent" >    Specifically, we will build an outline based Scout application featuring a navigation tree and pages to
present information in tabular form. In addition, the application also shows how to work with forms to
enter and/or update data, menus and context menus. On the server side, we show how to work with
databases, how to use logging in Scout applications and how to include standard Java libraries available
in JAR files.
<!--l. 32--><p class="indent" >    The chapter is organized as follows. In the first section, the finished demo application is explained
from the user perspective. The remaining sections focus on the individual steps to implement the
&#8221;My Contacts&#8221; application. To follow the description of the implementation the reader is
assumed to be familiar with the &#8221;Hello World&#8221; tutorial and the Scout SDK as described in
Chapter&#x00A0;<a 
href="bookch5.html#x64-520004">4<!--tex4ht:ref: cha:tooling --></a>.
    <h3 class="sectionHead"><span class="titlemark">5.1   </span> <a 
 id="x74-630005.1"></a>The &#8221;My Contacts&#8221; Application</h3>
<!--l. 41--><p class="noindent" >The &#8221;My Contacts&#8221; application is a client server application to manage personal contacts. Persistence of
entered data is achieved through a database backend.
<!--l. 44--><p class="indent" >    As social networking services<span class="footnote-mark"><a 
href="book77.html#fn3x7"><sup class="textsuperscript">3</sup></a></span><a 
 id="x74-63001f3"></a> 
such as Facebook, LinkedIn or Xing are widely used, the application also provides an example integration with
the LinkedIn<span class="footnote-mark"><a 
href="book78.html#fn4x7"><sup class="textsuperscript">4</sup></a></span><a 
 id="x74-63002f4"></a> 
                                                                                 

                                                                                 
platform. The implemented integration allows to download the personal contacts into the local database.
In the local database it is possible to mix persons entered manually with contact data downloaded from
LinkedIn.
<!--l. 54--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-630031"></a>
                                                                                 

                                                                                 

<!--l. 55--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_swt.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.1: </span><span  
class="content">The SWT client of the &#8221;My Contacts&#8221; application. </span></div><!--tex4ht:label?: x74-630031 -->
                                                                                 

                                                                                 
<!--l. 58--><p class="indent" >    </div><hr class="endfigure">
<!--l. 60--><p class="indent" >    After starting the Scout server application a client application may be started that then connects to
the server. In Figure&#x00A0;<a 
href="#x74-630031">5.1<!--tex4ht:ref: fig:my_contacts_swt --></a> the SWT desktop client is shown. In the background, the main
application window is visible showing a navigation tree on the left hand side. On the right side, a
table holds the elements corresponding to the selected tree node. Using an edit context menu
on the selected table row, a form to edit the relevant data may be opened as shown in the
example screen shot for &#8217;Alice&#8217;. Clicking on the link &#8217;Show Map ...&#8217; in the person form opens the
person&#8217;s location information in a map form using the data provided by Google Maps Image
API<span class="footnote-mark"><a 
href="book79.html#fn5x7"><sup class="textsuperscript">5</sup></a></span><a 
 id="x74-63004f5"></a> .
<!--l. 69--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-630052"></a>
                                                                                 

                                                                                 

<!--l. 70--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rayo_refresh.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.2: </span><span  
class="content">To refresh/generate an access token for reading LinkedIn contacts data select the
menu shown in the screen shot. </span></div><!--tex4ht:label?: x74-630052 -->
                                                                                 

                                                                                 
<!--l. 73--><p class="indent" >    </div><hr class="endfigure">
<!--l. 75--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-630063"></a>
                                                                                 

                                                                                 

<!--l. 76--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rayo_openauthurl.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/my_contacts_rayo_entercode.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.3: </span><span  
class="content">To refresh/create the access token click on the provided &#8217;Open Auth URL&#8217; link first
(left). Then, the security code field is enabled and the user can fill in the security code provided
on the LinkedIn web page. </span></div><!--tex4ht:label?: x74-630063 -->
                                                                                 

                                                                                 
<!--l. 81--><p class="indent" >    </div><hr class="endfigure">
<!--l. 83--><p class="indent" >    Before any LinkedIn data can be accessed from the &#8221;My Contacts&#8221; application an access token needs
to be retrieved from LinkedIn. To obtain such a token use the <span 
class="cmcsc-10">R<span 
class="small-caps">e</span><span 
class="small-caps">f</span><span 
class="small-caps">r</span><span 
class="small-caps">e</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> L<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">k</span><span 
class="small-caps">e</span><span 
class="small-caps">d</span>I<span 
class="small-caps">n</span> T<span 
class="small-caps">o</span><span 
class="small-caps">k</span><span 
class="small-caps">e</span><span 
class="small-caps">n</span> ...</span>
menu as shown in Figure&#x00A0;<a 
href="#x74-630052">5.2<!--tex4ht:ref: fig:my_contacts_rayo_refresh --></a>. This opens the refresh token form shown on the left side of
Figure&#x00A0;<a 
href="#x74-630063">5.3<!--tex4ht:ref: fig:my_contacts_rayo_openauthurl --></a>.
<!--l. 87--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-630074"></a>
                                                                                 

                                                                                 

<!--l. 88--><p class="noindent" ><img 
src="OneDayTutorial/figures/oauth_grant_access.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/oauth_security_code.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.4: </span><span  
class="content">The LinkedIn granting dialog steps shown in a web browser. In the first step (right)
confirm the access request, then the security code to create an access token is provided in the
second step (left). </span></div><!--tex4ht:label?: x74-630074 -->
                                                                                 

                                                                                 
<!--l. 94--><p class="indent" >    </div><hr class="endfigure">
<!--l. 96--><p class="indent" >    Clicking on the &#8217;Open Auth URL&#8217; link then opens the granting page provided by
LinkedIn shown on the left hand side of Figure&#x00A0;<a 
href="#x74-630074">5.4<!--tex4ht:ref: fig:oauth_security_code --></a>. After logging into your LinkedIn
account<span class="footnote-mark"><a 
href="book80.html#fn6x7"><sup class="textsuperscript">6</sup></a></span><a 
 id="x74-63008f6"></a> 
you can specify the desired access duration and confirm the &#8221;OAuth test for Scribe&#8221;
access<span class="footnote-mark"><a 
href="book81.html#fn7x7"><sup class="textsuperscript">7</sup></a></span><a 
 id="x74-63009f7"></a> 
to your LinkedIn data. If the authorization is successful, a security code as shown on the right side of
Figure&#x00A0;<a 
href="#x74-630074">5.4<!--tex4ht:ref: fig:oauth_security_code --></a> is presented by LinkedIn. This code needs then to be entered into the <span 
class="cmti-10">Security Code </span>field
as shown on the right side of Figure&#x00A0;<a 
href="#x74-630063">5.3<!--tex4ht:ref: fig:my_contacts_rayo_openauthurl --></a>. Then, click the <span 
class="cmcsc-10">OK </span>button to refresh the access
token.
<!--l. 108--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-630105"></a>
                                                                                 

                                                                                 

<!--l. 109--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rayo_updatecontacts.png" alt="PIC"  
> &#x00A0;
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.5: </span><span  
class="content">Executing the &#8217;Update LinkedIn Contacts for the first time imports the users LinkedIn
contacts into the &#8221;My Contacts&#8221; application.</span></div><!--tex4ht:label?: x74-630105 -->
                                                                                 

                                                                                 
<!--l. 112--><p class="indent" >    </div><hr class="endfigure">
<!--l. 114--><p class="indent" >    To import/update your LinkedIn contacts into your &#8221;My Contacts&#8221; application select the <span 
class="cmcsc-10">U<span 
class="small-caps">p</span><span 
class="small-caps">d</span><span 
class="small-caps">a</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span></span>
<span 
class="cmcsc-10">L<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">k</span><span 
class="small-caps">e</span><span 
class="small-caps">d</span>I<span 
class="small-caps">n</span> C<span 
class="small-caps">o</span><span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">a</span><span 
class="small-caps">c</span><span 
class="small-caps">t</span><span 
class="small-caps">s</span> </span>menu as shown in Figure&#x00A0;<a 
href="#x74-630105">5.5<!--tex4ht:ref: fig:my_contacts_rayo_updatecontacts --></a>. Once you have downloaded or entered a number of
persons in your &#8221;My Contacts&#8221; application, try to get yourself familiar with the application&#8217;s person
table. This is one of the very powerful Scout widgets. Columns may be filtered, moved, hidden or sorted
(including multi level sort) using the table header context menus <span 
class="cmcsc-10">O<span 
class="small-caps">r</span><span 
class="small-caps">g</span><span 
class="small-caps">a</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">z</span><span 
class="small-caps">e</span> C<span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">u</span><span 
class="small-caps">m</span><span 
class="small-caps">n</span><span 
class="small-caps">s</span>... </span>menu and
<span 
class="cmcsc-10">C<span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">u</span><span 
class="small-caps">m</span><span 
class="small-caps">n</span> F<span 
class="small-caps">i</span><span 
class="small-caps">l</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span>... </span>menu.
<!--l. 119--><p class="indent" >    Editing and viewing of person data is available by the <span 
class="cmcsc-10">E<span 
class="small-caps">d</span><span 
class="small-caps">i</span><span 
class="small-caps">t</span> P<span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span>... </span>context menu on a selected
row. To manually add a person use the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">w</span> P<span 
class="small-caps">e</span><span 
class="small-caps">r</span><span 
class="small-caps">s</span><span 
class="small-caps">o</span><span 
class="small-caps">n</span>... </span>context menu available on the table header or in
the white area outside the displayed columns.
<!--l. 122--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-630116"></a>
                                                                                 

                                                                                 

<!--l. 123--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rayo_filteredcontacts.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.6: </span><span  
class="content">After importing the contacts from LinkedIn the data is shown in the person page. The
filter applied on the headline column is indicated by the filter icon. In the front, the filter form
shows the filter criteria &#8217;Eclipse&#8217;.</span></div><!--tex4ht:label?: x74-630116 -->
                                                                                 

                                                                                 
<!--l. 127--><p class="indent" >    </div><hr class="endfigure">
<!--l. 129--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-630127"></a>
                                                                                 

                                                                                 

<!--l. 130--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rapweb_excelexport.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.7: </span><span  
class="content">The &#8221;My Contacts&#8221; application running in the browser as web application. The Excel
sheet shown in the front is exported from the person page using the &#8217;Tools/Export to Excel&#8217; menu.
</span></div><!--tex4ht:label?: x74-630127 -->
                                                                                 

                                                                                 
<!--l. 134--><p class="indent" >    </div><hr class="endfigure">
<!--l. 136--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-630138"></a>
                                                                                 

                                                                                 

<!--l. 137--><p class="noindent" ><img 
src="OneDayTutorial/figures/my_contacts_rapmobile_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/my_contacts_rapmobile_2.png" alt="PIC"  
> &#x00A0;
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.8: </span><span  
class="content">The &#8221;My Contacts&#8221; application running on an iPhone device. On the left hand side,
the person page is shown. The person form is shown on the right. </span></div><!--tex4ht:label?: x74-630138 -->
                                                                                 

                                                                                 
<!--l. 142--><p class="indent" >    </div><hr class="endfigure">
<!--l. 144--><p class="indent" >    In Figure&#x00A0;<a 
href="#x74-630127">5.7<!--tex4ht:ref: fig:my_contacts_rapweb_excelexport --></a> the &#8221;My Contacts&#8221; application is running in a web browser. In this example, the
<span 
class="cmcsc-10">T<span 
class="small-caps">o</span><span 
class="small-caps">o</span><span 
class="small-caps">l</span><span 
class="small-caps">s</span>&#8212;E<span 
class="small-caps">x</span><span 
class="small-caps">p</span><span 
class="small-caps">o</span><span 
class="small-caps">r</span><span 
class="small-caps">t</span> <span 
class="small-caps">t</span><span 
class="small-caps">o</span> E<span 
class="small-caps">x</span><span 
class="small-caps">c</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span> </span>menu is used to export the selected row into an Excel sheet. Finally, the
&#8221;My Contacts&#8221; application is also running on iPhone and Android mobile devices out of the box. Two
example screens are provided in Figure&#x00A0;<a 
href="#x74-630138">5.8<!--tex4ht:ref: fig:my_contacts_rapmobile --></a>.
<!--l. 149--><p class="indent" >    Once you no longer feel confident about having the &#8221;My Contacts&#8221; application accessing you data
you can revoke this access permission in the LinkedIn menu &#8221;Privacy and Settings&#8221;. In the lower part of
the settings page switch to the tab &#8221;Groups, Companies and Applications&#8221; and click on the link &#8221;View
your applications&#8221;. There, you will find again the partner name &#8221;OAuth test for Scribe&#8221;. To revoke the
access, select the associated checkbox and click the &#8221;Remove&#8221; button. The next time you try to refresh
your LinkedIn data from the &#8221;My Contacts&#8221; application will result in an Error message. Before you can
again access data from your LinkedIn account you just need to refresh the access token as described
above.
<!--l. 156--><p class="indent" >    To run the &#8221;My Contacts&#8221; Scout application without implementing it first, you may take advantage of
the fact that the application is hosted in the same Github repository as this book. If you are familiar with
Github<span class="footnote-mark"><a 
href="book82.html#fn8x7"><sup class="textsuperscript">8</sup></a></span><a 
 id="x74-63014f8"></a> , fork the Scout
Book repository<span class="footnote-mark"><a 
href="book83.html#fn9x7"><sup class="textsuperscript">9</sup></a></span><a 
 id="x74-63015f9"></a> 
and start from there. Alternatively, you can follow the description provided in the Scout
wiki<span class="footnote-mark"><a 
href="book84.html#fn10x7"><sup class="textsuperscript">10</sup></a></span><a 
 id="x74-63016f10"></a> 
to download, install and run the &#8221;My Contacts&#8221; application.
    <h3 class="sectionHead"><span class="titlemark">5.2   </span> <a 
 id="x74-640005.2"></a>Setting up the new Scout project</h3>
<!--l. 172--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-640019"></a>
                                                                                 

                                                                                 

<!--l. 173--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_project_contacts_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_project_contacts_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.9: </span><span  
class="content">Start with creating a new Scout project. </span></div><!--tex4ht:label?: x74-640019 -->
                                                                                 

                                                                                 
<!--l. 177--><p class="noindent" ></div><hr class="endfigure">
<!--l. 179--><p class="indent" >    The initial code for the &#8221;My Contacts&#8221; application is generated using the <span 
class="cmti-10">New Scout Project </span>wizard
as described in Section&#x00A0;<a 
href="bookch5.html#x64-580004.5.1">4.5.1<!--tex4ht:ref: sec:wizard_new_project --></a>. For the <span 
class="cmti-10">Project Name </span>field use the name <span 
class="cmtt-10">org.eclipsescout.contacts </span>as
shown on the left side of Figure&#x00A0;<a 
href="#x74-640019">5.9<!--tex4ht:ref: fig:new_project_contacts --></a> and click on the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. In the second wizard step
select the application template <span 
class="cmti-10">Outline Tree and Table Form </span>as shown on the right side of
Figure&#x00A0;<a 
href="#x74-640019">5.9<!--tex4ht:ref: fig:new_project_contacts --></a>.
<!--l. 183--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6400210"></a>
                                                                                 

                                                                                 

<!--l. 184--><p class="noindent" ><img 
src="OneDayTutorial/figures/project_contacts_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/project_contacts_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.10: </span><span  
class="content">The setting of the <span 
class="cmti-10">Technology </span>section in the Scout Object Properties of the &#8221;My
Contacts&#8221; application.</span></div><!--tex4ht:label?: x74-6400210 -->
                                                                                 

                                                                                 
<!--l. 188--><p class="indent" >    </div><hr class="endfigure">
<!--l. 190--><p class="indent" >    After the Scout SDK has created the initial application code select the top-level <span 
class="cmti-10">org.eclipsescout.contacts</span>
node in the Scout Explorer. In the technology section of the corresponding Scout Object Properties select
the Derby database driver, the Docx4j support and the Rayo look and feel as shown on the right side
of Figure&#x00A0;<a 
href="#x74-6400210">5.10<!--tex4ht:ref: fig:project_contacts_properties --></a>. In case you have not yet used the Scout Docx4j support or the Rayo look
and feel components, the Scout SDK will need to download these packages from the Eclipse
Marketplace<span class="footnote-mark"><a 
href="book85.html#fn11x7"><sup class="textsuperscript">11</sup></a></span><a 
 id="x74-64003f11"></a> 
first.
    <!--l. 204--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 204--><p class="indent" >    <a 
 id="x74-64004r1"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-64005"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.1:
    </span><span  
class="content">The
    <span 
class="cmtt-10">ExportToExcelMenu</span>
    class
    added
    by
    the
    Docx4j
    support
    to
    the
    application&#8217;s
    tools
    menu.</span></div><!--tex4ht:label?: x74-64004r5.2 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64006r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(20.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64007r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ExportToExcelMenu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractExtensibleMenu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64008r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64009r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64010r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredText</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64011r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">ExportToExcelMenu</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64012r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64013r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64014r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64015r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">execAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64016r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">getOutline</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">!=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&amp;&amp;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getOutline</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getActivePage</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">!=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><a 
 id="dx74-64017"></a><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64018r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ScoutXlsxSpreadsheetAdapter</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">s</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-64019"></a><span 
class="cmtt-9">ScoutXlsxSpreadsheetAdapter</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64020r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">File</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">xlsx</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">s</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">exportPage</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getOutline</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getActivePage</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64021r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><a 
 id="dx74-64022"></a><span 
class="cmtt-9">IShellService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><a 
 id="dx74-64023"></a><span 
class="cmtt-9">shellOpen</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">xlsx</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getAbsolutePath</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64024r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64025r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64026r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64027r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 206--><p class="indent" >    Adding the Docx4j support will also add the <span 
class="cmcsc-10">E<span 
class="small-caps">x</span><span 
class="small-caps">p</span><span 
class="small-caps">o</span><span 
class="small-caps">r</span><span 
class="small-caps">t</span> <span 
class="small-caps">t</span><span 
class="small-caps">o</span> E<span 
class="small-caps">x</span><span 
class="small-caps">c</span><span 
class="small-caps">e</span><span 
class="small-caps">l</span> </span>menu under tools menu on the
application&#8217;s desktop. As shown in Listing&#x00A0;<a 
href="#x74-64004r1">5.1<!--tex4ht:ref: lst:mycontacts.desktop.menu.exportoexcel --></a>, the <span 
class="cmtt-10">ScoutXlsxSpreadsheetAdapter </span>first creates an excel
file based on the currently active page in the <span 
class="cmtt-10">execAction </span>method. Then the file is opened on the client
using the <span 
class="cmtt-10">shellOpen </span>method.
<!--l. 210--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6402811"></a>
                                                                                 

                                                                                 

<!--l. 211--><p class="noindent" ><img 
src="OneDayTutorial/figures/desktop_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/desktop_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.11: </span><span  
class="content">Configure the application name in the title field of the Desktop&#8217;s properties. </span></div><!--tex4ht:label?: x74-6402811 -->
                                                                                 

                                                                                 
<!--l. 215--><p class="indent" >    </div><hr class="endfigure">
<!--l. 217--><p class="indent" >    To set the applications name select the <span 
class="cmti-10">Desktop </span>node in the Scout Explorer to access it&#8217;s Scout
Object Properties as shown in Figure&#x00A0;<a 
href="#x74-6402811">5.11<!--tex4ht:ref: fig:desktop_properties --></a>. In the <span 
class="cmti-10">Title </span>field enter the string &#8221;My Contacts&#8221; and create a
new translated text entry.
    <!--l. 227--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 227--><p class="indent" >    <a 
 id="x74-64029r2"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-64030"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.2:
    </span><span  
class="content">The
    <span 
class="cmtt-10">execOpened</span>
    method
    of
    desktop
    class
    of
    the
    &#8221;My
    Contacts&#8221;
    application.
    The
    application&#8217;s
    organisation
    into
    a
    tree
    and
    a
    table
    form
    is
    defined
    here.</span></div><!--tex4ht:label?: x74-64029r5.2 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64031r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64032r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-64033"></a><span 
class="cmtt-9">execOpened</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64034r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">a</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">mobile</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">home</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">in</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">client</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">mobile</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">plugin</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">is</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">used</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">instead</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64035r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(!</span><a 
 id="dx74-64036"></a><span 
class="cmtt-9">UserAgentUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">isDesktopDevice</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64037r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64038r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64039r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64040r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">outline</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tree</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64041r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DefaultOutlineTreeForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">treeForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DefaultOutlineTreeForm</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64042r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">treeForm</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setIconId</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Icons</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">EclipseScout</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64043r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">treeForm</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">startView</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64044r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64045r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">outline</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">table</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64046r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DefaultOutlineTableForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tableForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DefaultOutlineTableForm</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64047r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tableForm</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setIconId</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Icons</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">EclipseScout</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64048r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tableForm</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">startView</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64049r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64050r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">getAvailableOutlines</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">length</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64051r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setOutline</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">getAvailableOutlines</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">[0])</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64052r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-64053r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 229--><p class="indent" >    As shown in Listing&#x00A0;<a 
href="#x74-64029r2">5.2<!--tex4ht:ref: lst:mycontacts.desktop.execopened --></a> the application&#8217;s organisation into a tree and a table form is
explicitly defined in method <span 
class="cmtt-10">execOpened</span>. Click on the <span 
class="cmti-10">Exec Opened </span>link in the Scout Object
Properties to access the Java code of this method. First, using the <span 
class="cmtt-10">UserAgentUtility </span>class, the
method checks if the client is working with a desktop or a web client. If not, the method
returns and the tree and table setup is not used. Instead, the <span 
class="cmtt-10">MobileHomeForm </span>defined in
plugin <span 
class="cmti-10">org.eclipsescout.contacts.client.mobile </span>is used. In case the user is working with a web
client or a desktop client, default tree and table forms are created and started. Finally, the
currently active outline is set to the <span 
class="cmtt-10">StandardOutline</span>, as this is the only outline defined in this
application.
    <h3 class="sectionHead"><span class="titlemark">5.3   </span> <a 
 id="x74-650005.3"></a>Adding the Person Page</h3>
<!--l. 240--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6500112"></a>
                                                                                 

                                                                                 

<!--l. 241--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_page_person_contextmenu.png" alt="PIC"  
>    <img 
src="OneDayTutorial/figures/new_page_person_1.png" alt="PIC"  
>    <img 
src="OneDayTutorial/figures/new_page_person_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.12: </span><span  
class="content">Add the person table page below the standard outline. </span></div><!--tex4ht:label?: x74-6500112 -->
                                                                                 

                                                                                 
<!--l. 246--><p class="noindent" ></div><hr class="endfigure">
<!--l. 248--><p class="indent" >    The first UI component we add to the application is the person page. For the desktop clients, this
page is represented as a table that will list all available persons in the database of the &#8221;My
Contacts&#8221; application. To start the <span 
class="cmti-10">New Page </span>wizard use the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">w</span> P<span 
class="small-caps">a</span><span 
class="small-caps">g</span><span 
class="small-caps">e</span>... </span>context menu on the
<span 
class="cmti-10">Child Pages </span>folder as shown in Figure&#x00A0;<a 
href="#x74-6500112">5.12<!--tex4ht:ref: fig:new_page_person --></a>. On the first wizard step select the template
<span 
class="cmti-10">AbstractPageWithTable </span>and click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. On the second wizard step, provide the
page name &#8221;Person&#8221; to create a new translated text entry at the same time. Make sure the
other fields are filled in as shown in Figure&#x00A0;<a 
href="#x74-6500112">5.12<!--tex4ht:ref: fig:new_page_person --></a> and click the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button to close the
wizard.
    <!--l. 262--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 262--><p class="indent" >    <a 
 id="x74-65002r3"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-65003"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.3:
  </span><span  
class="content">The
  <span 
class="cmtt-10">execCreateChildPages</span>
  method
  of
  the
  standard
  outline.
  At
  the
  current
  implementation
  step
  the
  company
  table
  page
  is
  not
  (yet)
  added.</span></div><!--tex4ht:label?: x74-65002r5.3 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65004r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65005r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-65006"></a><span 
class="cmtt-9">execCreateChildPages</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Collection</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">IPage</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">pageList</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65007r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonTablePage</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">personTablePage</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonTablePage</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65008r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">pageList</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">add</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">personTablePage</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65009r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">pageList</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">add</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CompanyTablePage</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65010r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65011r7"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 264--><p class="indent" >    Listing&#x00A0;<a 
href="#x74-65002r3">5.3<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage --></a> shows the created method <span 
class="cmtt-10">execCreateChildPages </span>that links the newly created person
page to the standard outline. Note that your code will only look the same once you have added the
company page in a later step of the implementation of this application.
<!--l. 267--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6501213"></a>
                                                                                 

                                                                                 

<!--l. 268--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_column_personid_contextmenu.png" alt="PIC"  
>    <img 
src="OneDayTutorial/figures/new_column_personid_1.png" alt="PIC"  
>    <img 
src="OneDayTutorial/figures/new_column_personid_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.13: </span><span  
class="content">Add columns to the person page.</span></div><!--tex4ht:label?: x74-6501213 -->
                                                                                 

                                                                                 
<!--l. 273--><p class="indent" >    </div><hr class="endfigure">
<!--l. 275--><p class="indent" >    Now, drill down to the <span 
class="cmti-10">Columns </span>folder under the <span 
class="cmti-10">PersonTablePage </span>node as shown in Figure&#x00A0;<a 
href="#x74-6501314">5.14<!--tex4ht:ref: fig:new_column_personid --></a>.
Here we can add the desired table columns to the person page. Start with the column that will hold the
person id. For this, start the column wizard as shown on the left side of Figure&#x00A0;<a 
href="#x74-6501314">5.14<!--tex4ht:ref: fig:new_column_personid --></a> and select the string
column template. In the second wizard step, enter &#8221;PersonId&#8221; into the <span 
class="cmti-10">Class Name </span>field,select the radio
button <span 
class="cmti-10">Create one more column </span>and click on the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button. This will restart the column
wizard to enter the next columns. Create the remaining string columns with the following
names.
     <ul class="itemize1">
     <li class="itemize">First Name
     </li>
     <li class="itemize">Last Name
     </li>
     <li class="itemize">Headline</li></ul>
<!--l. 289--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6501314"></a>
                                                                                 

                                                                                 

<!--l. 290--><p class="noindent" ><img 
src="OneDayTutorial/figures/person_id_column.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/person_id_property.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.14: </span><span  
class="content">Configure the <span 
class="cmti-10">PersonId  </span>column. Check property <span 
class="cmti-10">Primary Key  </span>under the section
<span 
class="cmti-10">Advanced Properties </span>(right).</span></div><!--tex4ht:label?: x74-6501314 -->
                                                                                 

                                                                                 
<!--l. 294--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 303--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 303--><p class="indent" >    <a 
 id="x74-65014r4"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-65015"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.4:
     </span><span  
class="content">The
     person
     id
     and
     the
     first
     name
     columns
     of
     the
     <span 
class="cmtt-10">PersonTablePage</span>
     class.</span></div><!--tex4ht:label?: x74-65014r5.3 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65016r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65017r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonIdColumn</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractStringColumn</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65018r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65019r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65020r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredDisplayable</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65021r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">false</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65022r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65023r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65024r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65025r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredPrimaryKey</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65026r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65027r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65028r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65029r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65030r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(20.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65031r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">FirstNameColumn</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractStringColumn</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65032r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65033r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65034r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredHeaderText</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65035r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">FirstName</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65036r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65037r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 305--><p class="indent" >    Once you have created all these columns we will mark the person id column as the primary key
column for the person page. In the Scout Explorer select the <span 
class="cmti-10">PersonIdColumn </span>node to open the
corresponding Scout Object Properties. In this form, deselect the <span 
class="cmti-10">Displayable </span>property to always hide this
technical column from the end user. In the properties <span 
class="cmti-10">Advanced Properties </span>section check the <span 
class="cmti-10">Primary Key</span>
property. The resulting Java code for the primary key column and the first name column is provided in
Listing&#x00A0;<a 
href="#x74-65041r5">5.5<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage.columns --></a>.
<!--l. 311--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6504015"></a>
                                                                                 

                                                                                 

<!--l. 312--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_bean_companyid_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_bean_companyid.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.15: </span><span  
class="content">Add the <span 
class="cmti-10">CompanyId </span>variable to the person page.</span></div><!--tex4ht:label?: x74-6504015 -->
                                                                                 

                                                                                 
<!--l. 316--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 325--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 325--><p class="indent" >    <a 
 id="x74-65041r5"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-65042"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.5:
  </span><span  
class="content">The
  company
  id
  variable
  of
  the
  <span 
class="cmtt-10">PersonTablePage</span>
  class.</span></div><!--tex4ht:label?: x74-65041r5.3 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65043r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonTablePage</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractPageWithTable</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">PersonTablePage</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">Table</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65044r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65045r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_companyId</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65046r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@FormData</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65047r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getCompanyId</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65048r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_companyId</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65049r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65050r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65051r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@FormData</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65052r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setCompanyId</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">companyId</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65053r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_companyId</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">companyId</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65054r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-65055r13"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 327--><p class="indent" >    As we will later add and link the person page with a company page, we add a company id variable to
the person page as shown in Figure&#x00A0;<a 
href="#x74-6504015">5.15<!--tex4ht:ref: fig:new_bean_companyid --></a>. For the Java representation of such variables the standard bean
pattern is used as shown in Listing&#x00A0;<a 
href="#x74-65041r5">5.5<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage.columns --></a>.
    <h3 class="sectionHead"><span class="titlemark">5.4   </span> <a 
 id="x74-660005.4"></a>Adding the Company Page</h3>
<!--l. 333--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6600116"></a>
                                                                                 

                                                                                 

<!--l. 334--><p class="noindent" ><img 
src="OneDayTutorial/figures/add_existing_page_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/add_existing_page.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.16: </span><span  
class="content">Add the person page below the the company page.</span></div><!--tex4ht:label?: x74-6600116 -->
                                                                                 

                                                                                 
<!--l. 338--><p class="noindent" ></div><hr class="endfigure">
    <!--l. 347--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 347--><p class="indent" >    <a 
 id="x74-66002r6"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-66003"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.6:
    </span><span  
class="content">Linking
    the
    <span 
class="cmtt-10">PersonTablePage</span>
    with
    the
    parent
    <span 
class="cmtt-10">CompanyTablePage</span>.</span></div><!--tex4ht:label?: x74-66002r5.4 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-66004r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-66005r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IPage</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">execCreateChildPage</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">ITableRow</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">row</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-66006r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonTablePage</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">childPage</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonTablePage</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-66007r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">childPage</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setCompanyId</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">getTable</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getCompanyIdColumn</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">row</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-66008r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">childPage</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-66009r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 349--><p class="indent" >    After adding the person page, we add a company page to the standard outline. To add the company
page we use the same wizards as described in the previous section for the person page. For the
<span 
class="cmti-10">Name </span>field we enter the new translated text &#8221;Company&#8221; and the columns to add are the
following.
     <ul class="itemize1">
     <li class="itemize">Company Id
     </li>
     <li class="itemize">Name
     </li>
     <li class="itemize">Location</li></ul>
<!--l. 359--><p class="indent" >    As in the case of the person table page, the company id column is used as a primary key column.
The <span 
class="cmti-10">Displayable </span>property needs to be set to false and the <span 
class="cmti-10">Primary Key </span>property to true. Now we can link
the person page to the company page using the <span 
class="cmcsc-10">A<span 
class="small-caps">d</span><span 
class="small-caps">d</span> E<span 
class="small-caps">x</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">t</span><span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">g</span> P<span 
class="small-caps">a</span><span 
class="small-caps">g</span><span 
class="small-caps">e</span>... </span>context menu as shown on the
left side of Figure&#x00A0;<a 
href="#x74-6600116">5.16<!--tex4ht:ref: fig:add_existing_page --></a>. In the <span 
class="cmti-10">Link Page </span>wizard, the person page can then be selected according
to the right side of Figure&#x00A0;<a 
href="#x74-6600116">5.16<!--tex4ht:ref: fig:add_existing_page --></a>. In the Java code generated by the Scout SDK the setting
of the company id attribute is automatically inserted in method <span 
class="cmtt-10">execCreateChildPages</span>.
Please note that this convenience added by the Scout SDK wizard only works if the child page
defines variables with a naming that matches the defined primary key columns of the parent
table.
    <h3 class="sectionHead"><span class="titlemark">5.5   </span> <a 
 id="x74-670005.5"></a>Installing the Database</h3>
<!--l. 369--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6700117"></a>
                                                                                 

                                                                                 

<!--l. 370--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_service_derby_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_service_derby.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.17: </span><span  
class="content">Add the service to access the Derby database under folder <span 
class="cmti-10">SQL Services</span>. </span></div><!--tex4ht:label?: x74-6700117 -->
                                                                                 

                                                                                 
<!--l. 374--><p class="noindent" ></div><hr class="endfigure">
<!--l. 376--><p class="indent" >    To access a database we first need to install a database service. For the &#8221;My Contacts&#8221; application,
this is done using the <span 
class="cmti-10">New SQL Service </span>wizard on the Scout server under the <span 
class="cmti-10">SQL Services </span>folder
as shown in Figure&#x00A0;<a 
href="#x74-6700117">5.17<!--tex4ht:ref: fig:new_service_derby --></a>. In the first wizard step shown on the right side of the figure, use
&#8221;DerbySqlService&#8221; for the <span 
class="cmti-10">Class Name </span>field. From the drop-down list in the <span 
class="cmti-10">Super Class </span>field choose the
<span 
class="cmtt-10">AbstractDerbySqlService </span>and click on the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button.
    <!--l. 388--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 388--><p class="indent" >    <a 
 id="x74-67002r7"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-67003"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.7:
  </span><span  
class="content">Setting
  up
  the
  database
  parameters
  in
  the
  Scout
  server&#8217;s
  <span 
class="cmtt-10">config.ini</span>
  file.</span></div><!--tex4ht:label?: x74-67002r5.5 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67004r1"></a></span><span 
class="cmtt-9">###</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DataSource</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67005r2"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipsescout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">contacts</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">server</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">services</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">common</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">sql</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">DerbySqlService</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">directJdbcConnection</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67006r3"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipsescout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">contacts</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">server</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">services</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">common</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">sql</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">DerbySqlService</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">jdbcDriverName</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">apache</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">derby</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">jdbc</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">EmbeddedDriver</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67007r4"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipsescout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">contacts</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">server</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">services</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">common</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">sql</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">DerbySqlService</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">jdbcMappingName</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">jdbc</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">derby</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">$</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">workspace_loc</span><span 
class="cmtt-9">}/../</span><span 
class="cmtt-9">DB_CONTACT</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">create</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">territory</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">en_US</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67008r5"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipsescout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">contacts</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">server</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">services</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">common</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">sql</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">DerbySqlService</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">contact_user</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67009r6"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipsescout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">contacts</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">server</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">services</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">common</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">sql</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">DerbySqlService</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">password</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">secr3t</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 390--><p class="indent" >    To setup the database connection the necessary parameters need to be added to the server&#8217;s
<span class="path"><span 
class="cmtt-10">config.ini</span></span> file as shown in Listing&#x00A0;<a 
href="#x74-67002r7">5.7<!--tex4ht:ref: lst:mycontacts.server.configini.derby --></a>. Comparing the parameter names in this config file
with the package name of the created <span 
class="cmtt-10">DerbySqlService </span>service class reveals an interesting
framework feature. All Scout services can be parameterized using the <span class="path"><span 
class="cmtt-10">config.ini</span></span> file with the
pattern <span 
class="cmtt-10">&#x003C;package&#x003E;.&#x003C;class name&#x003E;#&#x003C;parameter&#x003E;=&#x003C;value&#x003E;</span>. The Scout runtime then sets the
service parameters using matching setter methods such as <span 
class="cmtt-10">setPassword </span>for the password
parameter.
<!--l. 395--><p class="indent" >    According to the parameter <span 
class="cmtt-10">jdbcMappingName=jdbc:derby:$</span><span 
class="cmsy-10">{</span><span 
class="cmtt-10">workspace</span><span 
class="cmtt-10">_loc</span><span 
class="cmsy-10">}</span><span 
class="cmtt-10">/... </span>a new Derby
database will be created in the same parent directory as the &#8221;My Contacts&#8221; workspace directory if no
database named <span 
class="cmtt-10">DB</span><span 
class="cmtt-10">_CONTACT </span>is found there. This setup is handy for development purposes but you may
want to set the database parameter to <span 
class="cmtt-10">create=false </span>in the <span class="path"><span 
class="cmtt-10">config.ini</span></span> of the production product
file.
<!--l. 398--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6701218"></a>
                                                                                 

                                                                                 

<!--l. 399--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_service_dbinstall_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_service_dbinstall_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.18: </span><span  
class="content">Add a database installation service. </span></div><!--tex4ht:label?: x74-6701218 -->
                                                                                 

                                                                                 
<!--l. 403--><p class="indent" >    </div><hr class="endfigure">
<!--l. 405--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-6701319"></a>
                                                                                 

                                                                                 

<!--l. 406--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_operation_installstorage_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_operation_installstorage.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.19: </span><span  
class="content">Add the service operation to create the DB schema. </span></div><!--tex4ht:label?: x74-6701319 -->
                                                                                 

                                                                                 
<!--l. 410--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 421--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 421--><p class="indent" >    <a 
 id="x74-67014r8"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-67015"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.8:
  </span><span  
class="content">The
  <span 
class="cmtt-10">installStorage</span>
  service
  operation
  to
  create
  the
  database
  schema
  for
  the
  &#8221;My
  Contacts&#8221;
  application.
  New
  tables
  are
  created
  if
  they
  are
  not
  found
  by
  <span 
class="cmtt-10">getExistingTables</span>
  in
  the
  existing
  schema.</span></div><!--tex4ht:label?: x74-67014r5.5 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67016r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DBInstallService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">implements</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IDBInstallService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67017r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67018r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_doSetup</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67019r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67020r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setDoSetup</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">doSetup</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67021r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_doSetup</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">doSetup</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67022r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67023r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67024r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67025r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">installStorage</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67026r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67027r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">m_doSetup</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67028r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Set</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getExistingTables</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67029r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">createCompanyTable</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67030r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">createPersonTable</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67031r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">createUsersParamTable</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67032r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67033r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67034r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67035r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Set</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getExistingTables</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67036r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Object</span><span 
class="cmtt-9">[][]</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">existingTables</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">select</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tablename</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">sys</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">systables</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67037r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">HashSet</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">result</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">HashSet</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x003E;(</span><span 
class="cmtt-9">existingTables</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">length</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67038r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">for</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Object</span><span 
class="cmtt-9">[]</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">row</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">existingTables</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67039r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">table</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">row</span><span 
class="cmtt-9">[0]</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">toUpperCase</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67040r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">result</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">add</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">table</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67041r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67042r27"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">result</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67043r28"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-67044r29"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <h4 class="subsectionHead"><span class="titlemark">5.5.1   </span> <a 
 id="x74-680005.5.1"></a>Setting up the Database Schema</h4>
<!--l. 426--><p class="noindent" >Having a working database service and a new (empty) Derby database now allows to create the necessary
database schema and populate it with some initial data. For this we add a new <span 
class="cmtt-10">DBInstallService</span>
service as shown in Figure&#x00A0;<a 
href="#x74-6701218">5.18<!--tex4ht:ref: fig:new_service_dbinstall --></a>. To this install service we then add the <span 
class="cmtt-10">installStorage </span>operation
according to Figure&#x00A0;<a 
href="#x74-6701319">5.19<!--tex4ht:ref: fig:new_operation_installstorage --></a>. The implementation of this method is provided in Listing&#x00A0;<a 
href="#x74-67014r8">5.8<!--tex4ht:ref: lst:mycontacts.server.services.installdb --></a>.
The method first checks if a setup is required. For this, the member variable <span 
class="cmtt-10">m</span><span 
class="cmtt-10">_doSetup </span>is
used that might also be set by the <span 
class="cmtt-10">setDoSetup </span>setter method via the server&#8217;s <span class="path"><span 
class="cmtt-10">config.ini</span></span>
file.
    <!--l. 439--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 439--><p class="indent" >    <a 
 id="x74-68001r9"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-68002"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.9:
    </span><span  
class="content">Setting
    up
    the
    <span 
class="cmtt-10">COMPANY</span>
    table
    of
    the
    &#8221;My
    Contacts&#8221;
    application.</span></div><!--tex4ht:label?: x74-68001r5.5 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68003r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">createCompanyTable</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Set</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68004r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(!</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">contains</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">COMPANY</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68005r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">CREATE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TABLE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68006r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(64)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NOT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NULL</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CONSTRAINT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY_PK</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PRIMARY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">KEY</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68007r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(64)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68008r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(64)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68009r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(64)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68010r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68011r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68012r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">INSERT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68013r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">VALUES</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(:</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">Alice</span><span 
class="cmtt-9">&#8217;&#8217;</span><span 
class="cmtt-9">s</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Adventures</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">in</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Wonderland</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">London</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">England</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">://</span><span 
class="cmtt-9">en</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">wikipedia</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">wiki</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">Alice</span><span 
class="cmtt-9">%27</span><span 
class="cmtt-9">s_Adventures_in_Wonderland</span><span 
class="cmtt-9">&#8217;)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68014r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UUID</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">randomUUID</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">toString</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68015r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68016r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">INSERT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68017r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">VALUES</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(:</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">BSI</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Business</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Systems</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Integration</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AG</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">Daettwil</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Baden</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Switzerland</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">://</span><span 
class="cmtt-9">www</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">bsiag</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">com</span><span 
class="cmtt-9">&#8217;)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68018r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UUID</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">randomUUID</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">toString</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68019r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68020r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68021r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <!--l. 447--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 447--><p class="indent" >    <a 
 id="x74-68024r10"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-68025"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.10:
    </span><span  
class="content">Setting
    up
    the
    <span 
class="cmtt-10">PERSON</span>
    table
    of
    the
    &#8221;My
    Contacts&#8221;
    application.</span></div><!--tex4ht:label?: x74-68024r5.5 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68026r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">createPersonTable</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Set</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68027r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(!</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">contains</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">PERSON</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68028r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">CREATE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TABLE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68029r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">person_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(64)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NOT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NULL</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CONSTRAINT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON_PK</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PRIMARY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">KEY</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68030r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(64)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68031r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">first_name</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(64)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68032r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">last_name</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(64)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68033r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(512)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68034r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(512)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68035r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">date_of_birth</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DATE</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68036r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">picture_url</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(512)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68037r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CONSTRAINT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY_FK</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">FOREIGN</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">KEY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">REFERENCES</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68038r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68039r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68040r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">INSERT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">first_name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">picture_url</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">date_of_birth</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68041r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">VALUES</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(:</span><span 
class="cmtt-9">person_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">Alice</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">The</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">curious</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">girl</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">Daresbury</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Cheshire</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">England</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68042r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">Alice</span><span 
class="cmtt-9">&#8217;&#8217;</span><span 
class="cmtt-9">s</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Adventures</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">in</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Wonderland</span><span 
class="cmtt-9">&#8217;)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">://</span><span 
class="cmtt-9">www</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">uergsel</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">de</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">uploads</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">Alice</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">png</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">dob</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68043r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">person_id</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UUID</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">randomUUID</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">toString</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68044r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">dob</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DateUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">parse</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">26.11.1865</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">dd</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">mm</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">yyyy</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68045r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68046r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68047r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <!--l. 455--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 455--><p class="indent" >    <a 
 id="x74-68050r11"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-68051"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.11:
    </span><span  
class="content">Setting
    up
    the
    <span 
class="cmtt-10">USERS</span><span 
class="cmtt-10">_PARAM</span>
    table
    of
    the
    &#8221;My
    Contacts&#8221;
    application.</span></div><!--tex4ht:label?: x74-68050r5.5 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68052r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">createUsersParamTable</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Set</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68053r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(!</span><span 
class="cmtt-9">tables</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">contains</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68054r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CREATE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TABLE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68055r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(32)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NOT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NULL</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68056r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(32)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NOT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NULL</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68057r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VARCHAR</span><span 
class="cmtt-9">(512)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68058r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CONSTRAINT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PARAM_PK</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PRIMARY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">KEY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68059r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68060r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68061r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">addInitialData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68062r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">nop</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68063r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68064r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68065r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 457--><p class="indent" >    Setting up the schema to contain the individual tables for the &#8221;My Contacts&#8221; application is
implemented in a separate method per table. The table definition for the company table is provided in
Listing&#x00A0;<a 
href="#x74-68001r9">5.9<!--tex4ht:ref: lst:mycontacts.server.services.installdb.company --></a>. In this method two Scout aspects are of interest.
<!--l. 461--><p class="indent" >    The first Scout feature used is the absence of a <span 
class="cmtt-10">COMMIT </span>statement after the two <span 
class="cmtt-10">INSERT INTO</span>
statements. This is possible, as all Scout service calls run in a transaction context that is transparent to
the Scout developer. If a service method exits without errors, the enclosing transaction is committed. And
if any runtime exception occurs in a service call the Scout runtime framework performs a
rollback.
<!--l. 466--><p class="indent" >    The second feature is the parameter binding used in the <span 
class="cmtt-10">INSERT INTO </span>statements. When SQL
statements are executed using any of the static <span 
class="cmtt-10">SQL </span>methods, an internal statement processor replaces all
bind variables found in the provided statement string. In Scout, SQL bind variables need to use the
pattern <span 
class="cmtt-10">:&#x003C;variable name&#x003E;</span>. The values for the bind variables can then be provided in the form of
additional arguments. In the concrete example of Listing&#x00A0;<a 
href="#x74-68001r9">5.9<!--tex4ht:ref: lst:mycontacts.server.services.installdb.company --></a>, the content for the bind variable
<span 
class="cmtt-10">:company</span><span 
class="cmtt-10">_id </span>is provided as a <span 
class="cmtt-10">NVPair </span>object. <span 
class="cmti-10">NVPair</span>s are the simplest possible form to represent bind
variables. The first constructor argument is the variable name of the bind variable, in this case
<span 
class="cmtt-10">company</span><span 
class="cmtt-10">_id</span>. The actual content of the bind variable is provided in the form of an object. Here,
the Java runtime class <span 
class="cmtt-10">UUID.randomUUID().toString() </span>is used to create a new company
key.
<!--l. 476--><p class="indent" >    Setting up the person table and the user parameter table is defined according to Listing&#x00A0;<a 
href="#x74-68024r10">5.10<!--tex4ht:ref: lst:mycontacts.server.services.installdb.person --></a> and
Listing&#x00A0;<a 
href="#x74-68050r11">5.11<!--tex4ht:ref: lst:mycontacts.server.services.installdb.users_param --></a>. To create a data object for the persons day of birth, the Scout utility class <span 
class="cmtt-10">DateUtility </span>is
used.
    <!--l. 486--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 486--><p class="indent" >    <a 
 id="x74-68068r12"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-68069"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.12:
  </span><span  
class="content">Scheduling
  the
  database
  installation
  in
  the
  <span 
class="cmtt-10">start</span>
  method
  of
  the
  <span 
class="cmtt-10">ServerApplication</span>
  class
  during
  the
  server
  application
  startup.</span></div><!--tex4ht:label?: x74-68068r5.5 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68070r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-68071"></a><span 
class="cmtt-9">ServerApplication</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">implements</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IApplication</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68072r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IScoutLogger</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">logger</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ScoutLogManager</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getLogger</span><span 
class="cmtt-9">(</span><a 
 id="dx74-68073"></a><span 
class="cmtt-9">ServerApplication</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68074r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68075r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68076r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Object</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">start</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IApplicationContext</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">context</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Exception</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><a 
 id="dx74-68077"></a><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68078r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ServerSession</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">serverSession</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IServerSessionRegistryService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">newServerSession</span><span 
class="cmtt-9">(</span><a 
 id="dx74-68079"></a><span 
class="cmtt-9">ServerSession</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Activator</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getDefault</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getBackendSubject</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68080r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68081r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ServerJob</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">installJob</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ServerJob</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">Install</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">the</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">contacts</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DB</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">schema</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">serverSession</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68082r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68083r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IStatus</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">runTransaction</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IProgressMonitor</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">monitor</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68084r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">try</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68085r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IDBInstallService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">installStorage</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68086r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">logger</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">info</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">Contacts</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DB</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">schema</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">successfully</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">created</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68087r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68088r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">catch</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Throwable</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">t</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68089r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Status</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IStatus</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">ERROR</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Activator</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">PLUGIN_ID</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">Error</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">while</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">installing</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">the</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">contacts</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DB</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">schema</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">t</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68090r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68091r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68092r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Status</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">OK_STATUS</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68093r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68094r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">};</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68095r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">installJob</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">schedule</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68096r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">installJob</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">join</span><span 
class="cmtt-9">(20000)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68097r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68098r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">logger</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">info</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">Contacts</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">server</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">application</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">started</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68099r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">EXIT_OK</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68100r27"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-68101r28"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 488--><p class="indent" >    The only piece missing to setup the database is calling the <span 
class="cmtt-10">installStorage </span>operation during the
startup of the &#8221;My Contacts&#8221; server application. The proper way to implement such a scenario is to
schedule an installation job in the <span 
class="cmtt-10">ServerApplication </span>class of the Scout server. In the &#8221;My Contacts&#8221;
application this is implemented according to Listing&#x00A0;<a 
href="#x74-68068r12">5.12<!--tex4ht:ref: lst:mycontacts.server.serverapplication --></a>. To create a server job, a new server session
object needs to be obtained first. However, during the startup time of the server we do not have any
logged in users yet. That is why the session is created for the backend subject representing the
server application. Using this <span 
class="cmtt-10">serverSession </span>object, the <span 
class="cmtt-10">installJob </span>can be created. In it&#8217;s
<span 
class="cmtt-10">runTransaction </span>method we can then call the <span 
class="cmtt-10">installStorage </span>operation to setup the &#8221;My Contacts&#8221;
database.
    <h4 class="subsectionHead"><span class="titlemark">5.5.2   </span> <a 
 id="x74-690005.5.2"></a>Scout Logging</h4>
    <!--l. 507--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 507--><p class="indent" >    <a 
 id="x74-69001r13"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-69002"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.13:
  </span><span  
class="content">The
  logging
  configuration
  in
  the
  Scout
  server&#8217;s
  <span 
class="cmtt-10">config.ini</span>
  file.</span></div><!--tex4ht:label?: x74-69001r5.5 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-69003r1"></a></span><span 
class="cmtt-9">eclipse</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">consoleLog</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-69004r2"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipse</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">scout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">log</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">eclipse</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-69005r3"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipse</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">scout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">log</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">level</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">INFO</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 509--><p class="indent" >    An additional Scout topic that is touched in this <span 
class="cmtt-10">ServerApplication </span>class is the Scout logging. As
shown in Listing&#x00A0;<a 
href="#x74-68068r12">5.12<!--tex4ht:ref: lst:mycontacts.server.serverapplication --></a>, a static <span 
class="cmtt-10">logger </span>object is created using Scout&#8217;s <span 
class="cmtt-10">ScoutLogManager </span>class. Events can
then be logged with the <span 
class="cmtt-10">logger.info </span>method where <span 
class="cmtt-10">info </span>refers to the log level attached to this
message. Similar to the database setup described above, the logging setup can be defined
in <span class="path"><span 
class="cmtt-10">config.ini</span></span> file. The default setup defined for the development product is provided in
Listing&#x00A0;<a 
href="#x74-69001r13">5.13<!--tex4ht:ref: lst:mycontacts.server.configini.logging --></a>. Further information regarding logging in Eclipse Scout is available in the Scout
wiki<span class="footnote-mark"><a 
href="book86.html#fn12x7"><sup class="textsuperscript">12</sup></a></span><a 
 id="x74-69008f12"></a> .
    <h3 class="sectionHead"><span class="titlemark">5.6   </span> <a 
 id="x74-700005.6"></a>Fetching Data from the Database</h3>
<!--l. 521--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7000120"></a>
                                                                                 

                                                                                 

<!--l. 522--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_service_persontabledata_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_service_persontabledata.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.20: </span><span  
class="content">Add the service operation to fetch the data for the person table. </span></div><!--tex4ht:label?: x74-7000120 -->
                                                                                 

                                                                                 
<!--l. 526--><p class="noindent" ></div><hr class="endfigure">
<!--l. 528--><p class="indent" >    In the section before, we have implemented the access to the Derby database for the Scout server.
And during the server startup, the application&#8217;s database schema can now be created and populated with
some initial data.
<!--l. 531--><p class="indent" >    Here, this schema and the implemented database access is used to fetch the data for the
client application&#8217;s person page and the company page. The best place to implement these
data provider methods is in the server&#8217;s <span 
class="cmtt-10">StandardOutlineService </span>class. This class has been
created by the Scout SDK during the initial project creation step. It is meant to hold the
operations that fetch the data for populating the elements visible in the outline tree and outline
pages.
<!--l. 536--><p class="indent" >    For the &#8221;My Contacts&#8221; application, we first create the <span 
class="cmtt-10">getPersonTableData </span>operation as shown in
Figure&#x00A0;<a 
href="#x74-7000120">5.20<!--tex4ht:ref: fig:new_service_persontabledata --></a>. In the wizard dialog enter &#8221;getPersonTableData&#8221; into the <span 
class="cmti-10">Operation Name </span>field. For the
return type we simply use a two dimensional object array. As the person page is also displayed
under the company page, we need to have a way to only return the persons working for a
specific company. To allow for this use case, we add the parameter &#8221;companyId&#8221; as the first
argument to the <span 
class="cmtt-10">getPersonTableData </span>operation before we close the wizard with <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
<!--l. 542--><p class="indent" >    The next operation we need is the <span 
class="cmtt-10">getCompanyTableData </span>method. You may use the same creation
steps as described above for the person table page data. But for fetching company table data we do not
need an additional argument. The company page in the &#8221;My Contacts&#8221; application will always show all
available companies.
    <!--l. 555--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 555--><p class="indent" >    <a 
 id="x74-70002r14"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-70003"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.14:
  </span><span  
class="content">Fetching
  the
  table
  data
  for
  the
  person
  and
  the
  company
  page
  of
  the
  &#8221;My
  Contacts&#8221;
  application.
  The
  list
  of
  persons
  is
  restricted
  to
  employees
  of
  a
  specific
  company
  if
  a
  company
  id
  parameter
  is
  provided.</span></div><!--tex4ht:label?: x74-70002r5.6 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70004r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-70005"></a><span 
class="cmtt-9">StandardOutlineService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">implements</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IStandardOutlineService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70006r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70007r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70008r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Object</span><span 
class="cmtt-9">[][]</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getPersonTableData</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">companyId</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70009r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">stmt</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">person_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">first_name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">last_name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70010r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70011r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><a 
 id="dx74-70012"></a><span 
class="cmtt-9">StringUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">isNullOrEmpty</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">companyId</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70013r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-70014"></a><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">select</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">stmt</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70015r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70016r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70017r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-70018"></a><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">select</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">stmt</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">companyId</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70019r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-70020"></a><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">companyId</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">companyId</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70021r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70022r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70023r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70024r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Object</span><span 
class="cmtt-9">[][]</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getCompanyTableData</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70025r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-70026"></a><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">select</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70027r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-70028r19"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 557--><p class="indent" >    For the actual implementation of the two data fetching operations the code provided in
Listing&#x00A0;<a 
href="#x74-70002r14">5.14<!--tex4ht:ref: lst:mycontacts.server.services.standardoutline --></a> is used. The implementation is straight forward and almost trivial. However,
we can use the <span 
class="cmtt-10">getPersonTableData </span>example to introduce one of the many Scout utility
classes.
<!--l. 561--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7002921"></a>
                                                                                 

                                                                                 

<!--l. 562--><p class="noindent" ><img 
src="OneDayTutorial/figures/scout_utility_classes.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.21: </span><span  
class="content">Accessing the Scout utility classes with the pattern <span 
class="cmtt-10">org.eclipse.scout.*Utility</span>.</span></div><!--tex4ht:label?: x74-7002921 -->
                                                                                 

                                                                                 
<!--l. 565--><p class="indent" >    </div><hr class="endfigure">
<!--l. 567--><p class="indent" >    The class <span 
class="cmtt-10">StringUtility </span>is one of the many utility classes provided by the Scout framework. Here,
it is used for the typical null or empty check. To get a quick overview, hit the <span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10">C<span 
class="small-caps">t</span><span 
class="small-caps">r</span><span 
class="small-caps">l</span></span><span 
class="cmmi-10">&#x003E;&#x003C;</span><span 
class="cmcsc-10">S<span 
class="small-caps">h</span><span 
class="small-caps">i</span><span 
class="small-caps">f</span><span 
class="small-caps">t</span></span><span 
class="cmmi-10">&#x003E;&#x003C;</span><span 
class="cmcsc-10">T</span><span 
class="cmmi-10">&#x003E;</span>
key combination. In the type dialog that appears enter <span 
class="cmtt-10">org.eclipse.scout.*Utility </span>into
the pattern field. This will display the complete list of the Scout utility classes as shown in
Figure&#x00A0;<a 
href="#x74-7002921">5.21<!--tex4ht:ref: fig:scout_utility_classes --></a>.
    <h3 class="sectionHead"><span class="titlemark">5.7   </span> <a 
 id="x74-710005.7"></a>Creating the Person Form</h3>
<!--l. 576--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7100122"></a>
                                                                                 

                                                                                 

<!--l. 577--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_form_person_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_form_person.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.22: </span><span  
class="content">Add the person form.</span></div><!--tex4ht:label?: x74-7100122 -->
                                                                                 

                                                                                 
<!--l. 581--><p class="noindent" ></div><hr class="endfigure">
<!--l. 583--><p class="indent" >    In this section we will create the person form that is used to display and edit the persons stored in
the &#8221;My Contacts&#8221; application. To add the person form use the Scout SDK <span 
class="cmti-10">New Form </span>wizard as shown
in Figure&#x00A0;<a 
href="#x74-7100122">5.22<!--tex4ht:ref: fig:new_form_person --></a>. In the first wizard step you just need to enter &#8221;Person&#8221; as a new translated text into the
<span 
class="cmti-10">Name </span>field and add &#8221;ui.forms&#8221; as the sub-package name in the corresponding wizard field. Then click the
<span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button.
<!--l. 588--><p class="indent" >    The wizard will create the necessary artefacts in the application&#8217;s client, the shared and the server
plugin projects. On the client side the <span 
class="cmtt-10">PersonForm </span>class with the necessary form handlers is
created, in the shared part, the <span 
class="cmtt-10">PersonFormData </span>transfer object is added. On the server side, a
<span 
class="cmtt-10">PersonProcessService </span>with all necessary service operations referenced by the form handlers is
implemented.
<!--l. 592--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7100223"></a>
                                                                                 

                                                                                 

<!--l. 593--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_bean_personid_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_bean_personid.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.23: </span><span  
class="content">Add the <span 
class="cmti-10">PersonId </span>variable to the person form.</span></div><!--tex4ht:label?: x74-7100223 -->
                                                                                 

                                                                                 
<!--l. 597--><p class="indent" >    </div><hr class="endfigure">
<!--l. 599--><p class="indent" >    To hold the persons primary key in the person form we also need to add a corresponding variable.
For this, use the <span 
class="cmti-10">New Property Bean </span>wizard as shown in Figure&#x00A0;<a 
href="#x74-7100223">5.23<!--tex4ht:ref: fig:new_bean_personid --></a>. In the wizard dialog, enter
&#8221;PersonId&#8221; into the <span 
class="cmti-10">Name </span>field and pick <span 
class="cmtt-10">String </span>from the dropdown list provided in the <span 
class="cmti-10">Bean type </span>field.
Then, click the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button to close the wizard.
    <h4 class="subsectionHead"><span class="titlemark">5.7.1   </span> <a 
 id="x74-720005.7.1"></a>Creating the Form Layout with From Fields</h4>
<!--l. 607--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7200124"></a>
                                                                                 

                                                                                 

<!--l. 608--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_field_personbox.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_field_personbox_name.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.24: </span><span  
class="content">Add the first group box field to the person form.</span></div><!--tex4ht:label?: x74-7200124 -->
                                                                                 

                                                                                 
<!--l. 612--><p class="noindent" ></div><hr class="endfigure">
<!--l. 614--><p class="indent" >    As a next step we create the main layout structure of the person form. According to the screenshot
of the person form shown in Figure&#x00A0;<a 
href="#x74-630031">5.1<!--tex4ht:ref: fig:my_contacts_swt --></a> the form is organized into an upper box including the first name,
the last name and a picture field. In the &#8221;Details&#8221; box in the lower half of the form some additional fields
are found, such as the date of birth field. The bottom of the form holds a &#8221;Show Map ...&#8221;
link. We start with the general layout by adding the <span 
class="cmtt-10">PersonBox </span>according to Figure&#x00A0;<a 
href="#x74-7200124">5.24<!--tex4ht:ref: fig:new_field_personbox --></a>.
And again on the person&#8217;s from <span 
class="cmti-10">MainBox </span>node we add a second group box field using the
label &#8221;Detail&#8221;. The link is added with the <span 
class="cmti-10">New Form Field </span>wizard too. In the first wizard
step select the type <span 
class="cmtt-10">LinkButton </span>and use a new translated text &#8221;Show Map ...&#8221; for the <span 
class="cmti-10">Name</span>
field
<!--l. 623--><p class="indent" >    We now add the form fields listed below using the the <span 
class="cmti-10">New Form Field </span>wizard multiple times. Most
fields are of type <span 
class="cmtt-10">StringField </span>and different field types are separately indicated.
     <ul class="itemize1">
     <li class="itemize">PersonBox
         <ul class="itemize2">
         <li class="itemize">&#8221;First Name&#8221;
         </li>
         <li class="itemize">&#8221;Last Name&#8221;
         </li>
         <li class="itemize">PictureUrlField
         </li>
         <li class="itemize">PictureField (ImageField)</li></ul>
     </li>
     <li class="itemize">&#8221;Detail&#8221; DetailBox
         <ul class="itemize2">
         <li class="itemize">&#8221;Headline&#8221;
         </li>
         <li class="itemize">&#8221;Location&#8221;
         </li>
         <li class="itemize">&#8221;Date of Birth&#8221; (DateField)</li></ul>
     </li></ul>
<!--l. 642--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7200225"></a>
                                                                                 

                                                                                 

<!--l. 643--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_field_picture_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_field_picture.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.25: </span><span  
class="content">Add the picture field to the first group box of the person form.</span></div><!--tex4ht:label?: x74-7200225 -->
                                                                                 

                                                                                 
<!--l. 647--><p class="indent" >    </div><hr class="endfigure">
<!--l. 649--><p class="indent" >    As an example for adding the form fields, the process is illustrated in Figure&#x00A0;<a 
href="#x74-7200225">5.25<!--tex4ht:ref: fig:new_field_picture --></a> for the creation of
the picture field. In the field list we need to set non default properties for the <span 
class="cmti-10">PictureUrlField </span>field and
the <span 
class="cmti-10">PictureField </span>field. The picture URL field will hold an URL pointing to the picture of the
person to be displayed. As in the person form only the picture is to be displayed but not
the picture URL, we need to make this field invisible. For this, select the <span 
class="cmti-10">PictureUrlField</span>
node in the Scout Explorer and then untick the <span 
class="cmti-10">Visible </span>field in the Scout Object Properties.
Note that to access the visibility property you need to open the section <span 
class="cmti-10">Advanced Properties</span>
first.
<!--l. 656--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7200326"></a>
                                                                                 

                                                                                 

<!--l. 657--><p class="noindent" ><img 
src="OneDayTutorial/figures/picture_field_properties_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/picture_field_properties_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.26: </span><span  
class="content">Set the properties for the picture field of the person form.</span></div><!--tex4ht:label?: x74-7200326 -->
                                                                                 

                                                                                 
<!--l. 661--><p class="indent" >    </div><hr class="endfigure">
<!--l. 663--><p class="indent" >    As the configuration of the picture field is more complex than the other fields, the changed
properties are shown in the screenshots provided in Figure&#x00A0;<a 
href="#x74-7200326">5.26<!--tex4ht:ref: fig:picture_field_properties --></a>. First, no label is shown for the
picture field as shown in the unticked <span 
class="cmti-10">Label Visible </span>field of the Scout Object Properties. Then,
property <span 
class="cmti-10">Grid H </span>is set to 5. This results in the picture to cover the vertical space of 5 form
fields.
    <!--l. 675--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 675--><p class="indent" >    <a 
 id="x74-72004r15"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-72005"></a>

       <div class="caption" 
><span class="id">Listing&#x00A0;5.15:
       </span><span  
class="content">The
       behaviour
       of
       the
       person
       form&#8217;s
       <span 
class="cmtt-10">PictureField</span>
       is
       triggered
       by
       changes
       in
       field
       <span 
class="cmtt-10">PictureUrlField</span>.</span></div><!--tex4ht:label?: x74-72004r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72006r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(40.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72007r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PictureField</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractImageField</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72008r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72009r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Class</span><span 
class="cmtt-9">&#x003C;?</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IValueField</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-72010"></a><span 
class="cmtt-9">getConfiguredMasterField</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72011r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PictureUrlField</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72012r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72013r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72014r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72015r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-72016"></a><span 
class="cmtt-9">execChangedMasterValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Object</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">newMasterValue</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72017r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">try</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72018r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">URL</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">URL</span><span 
class="cmtt-9">((</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">newMasterValue</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72019r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setImage</span><span 
class="cmtt-9">(</span><a 
 id="dx74-72020"></a><span 
class="cmtt-9">IOUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getContent</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">openStream</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72021r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setAutoFit</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72022r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72023r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">catch</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Exception</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">e</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72024r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">e</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">printStackTrace</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72025r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72026r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-72027r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 677--><p class="indent" >    Finally, we want the picture to be refreshed whenever the content of the picture URL is changed. For
this, the property <span 
class="cmti-10">Master Field </span>is set to the <span 
class="cmtt-10">PictureUrlField</span>. The implementation of the
corresponding method <span 
class="cmtt-10">execChangedMasterValue </span>is provided in Listing&#x00A0;<a 
href="#x74-72004r15">5.15<!--tex4ht:ref: lst:mycontacts.client.forms.person.picturefield --></a>. As we can see, the
Scout helper class <span 
class="cmtt-10">IOUtility </span>is used to read the image content from the provided URL. This
content is then used to assign the image content with the image field&#8217;s method <span 
class="cmtt-10">setImage</span>.
Method <span 
class="cmtt-10">setAutoFit </span>is called to adapt the picture to the dimensions available to the image
field.
    <h4 class="subsectionHead"><span class="titlemark">5.7.2   </span> <a 
 id="x74-730005.7.2"></a>A simple Form to edit the Picture URL</h4>
<!--l. 687--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7300127"></a>
                                                                                 

                                                                                 

<!--l. 688--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_form_url_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_form_url_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.27: </span><span  
class="content">Add the URL editor form.</span></div><!--tex4ht:label?: x74-7300127 -->
                                                                                 

                                                                                 
<!--l. 692--><p class="noindent" ></div><hr class="endfigure">
<!--l. 694--><p class="indent" >    To edit a person&#8217;s picture link, we create a simple URL editor form as shown in Figure&#x00A0;<a 
href="#x74-7300127">5.27<!--tex4ht:ref: fig:new_form_url --></a>. As we
only need this form to update the URL information of a person&#8217;s picture field, we do not need
any connectivity to the backend of the &#8221;My Contacts&#8221; application. That is why almost all
form and service artefacts are deselected in the second wizard step shown on the right side of
Figure&#x00A0;<a 
href="#x74-7300127">5.27<!--tex4ht:ref: fig:new_form_url --></a>.
    <!--l. 704--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 704--><p class="indent" >    <a 
 id="x74-73002r16"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-73003"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.16:
  </span><span  
class="content">The
  UI
  structure
  of
  the
  <span 
class="cmtt-10">PictureURLForm</span>
  used
  to
  update
  the
  URL
  of
  the
  picture
  field
  in
  the
  person
  form.
  The
  rest
  of
  the
  class
  created
  by
  the
  Scout
  SDK
  has
  been
  omitted.</span></div><!--tex4ht:label?: x74-73002r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73004r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PictureURLForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73005r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73006r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">MainBox</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractGroupBox</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73007r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73008r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73009r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UrlBox</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractGroupBox</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73010r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73011r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73012r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">URLField</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractStringField</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73013r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73014r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73015r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredLabel</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73016r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">URL</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73017r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73018r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73019r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73020r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73021r18"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 706--><p class="indent" >    As this form only holds a single URL field, we omit the description of the creation of the URL editor
form&#8217;s content and provide the resulting Java code instead. In Listing&#x00A0;<a 
href="#x74-73002r16">5.16<!--tex4ht:ref: lst:mycontacts.client.forms.pictureurl --></a> just the form&#8217;s <span 
class="cmtt-10">MainBox </span>code
is shown.
<!--l. 709--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7302228"></a>
                                                                                 

                                                                                 

<!--l. 710--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_menu_editurl_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_menu_editurl.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.28: </span><span  
class="content">Add the URL edit menu to the picture field.</span></div><!--tex4ht:label?: x74-7302228 -->
                                                                                 

                                                                                 
<!--l. 714--><p class="indent" >    </div><hr class="endfigure">
<!--l. 716--><p class="indent" >    This form is then started via an &#8221;Edit URL ...&#8221; contextmenu on the image field. The creation of this
contextmenu is shown in Figure&#x00A0;<a 
href="#x74-7302228">5.28<!--tex4ht:ref: fig:new_menu_editurl --></a>. See Listing&#x00A0;<a 
href="#x74-73023r17">5.17<!--tex4ht:ref: lst:mycontacts.client.forms.person.picturefield.editmenu --></a> for the actual implementation of the <span 
class="cmtt-10">execAction</span>
for this contextmenu.
    <!--l. 728--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 728--><p class="indent" >    <a 
 id="x74-73023r17"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-73024"></a>

        <div class="caption" 
><span class="id">Listing&#x00A0;5.17:
        </span><span  
class="content">The
        edit
        menu
        implemented
        in
        class
        <span 
class="cmtt-10">EditURLMenu</span>
        of
        the
        picture
        field.
        If
        the
        URL
        was
        changed
        the
        picture
        URL
        field
        of
        the
        person
        form
        is
        set
        accordingly
        in
        method
        <span 
class="cmtt-10">execAction</span></span></div><!--tex4ht:label?: x74-73023r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73025r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73026r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">EditURLMenu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractExtensibleMenu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73027r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73028r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73029r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredText</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73030r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">EditURL</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73031r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73032r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73033r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73034r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-73035"></a><span 
class="cmtt-9">execAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73036r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PictureURLForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PictureURLForm</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73037r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">startModify</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73038r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">waitFor</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73039r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">isFormStored</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73040r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getPictureUrlField</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getURLField</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73041r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73042r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-73043r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 730--><p class="indent" >    Once the edit URL form is started with <span 
class="cmtt-10">form.startModify() </span>the client waits in method
<span 
class="cmtt-10">form.waitFor </span>until the form is closed by the user. If the user has changed any field content (the picture
URL in our case) and closed the form with the <span 
class="cmcsc-10">OK </span>button, the method <span 
class="cmtt-10">form.isFormStored </span>returns true,
and we can copy the new URL from the editor form field into the picture URL field of the person form.
Such a change will then trigger method <span 
class="cmtt-10">execChangedMasterValue </span>of the <span 
class="cmtt-10">PictureField </span>which in turn
updates the image shown in the person form.
    <h4 class="subsectionHead"><span class="titlemark">5.7.3   </span> <a 
 id="x74-740005.7.3"></a>Linking the Person Form to the Person Page</h4>
<!--l. 737--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7400129"></a>
                                                                                 

                                                                                 

<!--l. 738--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_menu_editperson_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_menu_editperson.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.29: </span><span  
class="content">Add the Person edit menu to the person page.</span></div><!--tex4ht:label?: x74-7400129 -->
                                                                                 

                                                                                 
<!--l. 742--><p class="noindent" ></div><hr class="endfigure">
    <!--l. 752--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 752--><p class="indent" >    <a 
 id="x74-74002r18"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-74003"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.18:
     </span><span  
class="content">The
     <span 
class="cmtt-10">EditPersonMenu</span>
     to
     edit
     the
     person
     selected
     in
     the
     person
     table.
     The
     person
     id
     taken
     from
     the
     corresponding
     (invisible)
     column
     is
     transferred
     to
     the
     person
     form
     before
     the
     form
     is
     started.</span></div><!--tex4ht:label?: x74-74002r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74004r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74005r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">EditPersonMenu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractExtensibleMenu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74006r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74007r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74008r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredText</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74009r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">EditPerson</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74010r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74011r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74012r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74013r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">execAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74014r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonForm</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74015r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setPersonId</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">getPersonIdColumn</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getSelectedValue</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74016r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">startModify</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74017r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">waitFor</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74018r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><a 
 id="dx74-74019"></a><span 
class="cmtt-9">isFormStored</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><a 
 id="dx74-74020"></a><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74021r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">reloadPage</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74022r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74023r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74024r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 754--><p class="indent" >    The user of the &#8221;My Contacts&#8221; application wants to use the person form to show/edit attributes of a
specific person. To support this use case, we need to link this form with the &#8221;My Contacts&#8221; application.
As we already have person pages that show some of the person&#8217;s attribute, we can now add
context menus to this list to open/edit existing persons in the person form and to create
new persons as well. This is achieved by using the <span 
class="cmti-10">New Menu </span>wizard on the <span 
class="cmti-10">Menus </span>node
of the table of the person page according to Figure&#x00A0;<a 
href="#x74-7400129">5.29<!--tex4ht:ref: fig:new_menu_editperson --></a>. In the <span 
class="cmti-10">Name </span>field enter the new
translated text &#8221;Edit Person ...&#8221;. The form to start is the <span 
class="cmtt-10">PersonForm </span>and the <span 
class="cmtt-10">ModifyHandler </span>is
the form handler to be used to start the form. As we have defined a meaningful primary
key column on the person page and a matching variable is available for the person form,
the Scout SDK wizard is generating the necessary code automatically. The implementation
of the <span 
class="cmtt-10">execAction </span>method provided in Listing&#x00A0;<a 
href="#x74-74002r18">5.18<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage.editmenu --></a> works out of the box and should not
need any manual tuning. Now, you may also add the &#8221;New Person ...&#8221; menu in the same
way. Except that you pick the <span 
class="cmtt-10">NewHander </span>in the <span 
class="cmti-10">New Menu </span>wizard instead of the modify
handler.
<!--l. 765--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7402730"></a>
                                                                                 

                                                                                 

<!--l. 766--><p class="noindent" ><img 
src="OneDayTutorial/figures/person_table_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/person_table_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.30: </span><span  
class="content">Set the behaviour for the row level action on the person table.</span></div><!--tex4ht:label?: x74-7402730 -->
                                                                                 

                                                                                 
<!--l. 770--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 779--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 779--><p class="indent" >    <a 
 id="x74-74028r19"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-74029"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.19:
     </span><span  
class="content">The
     <span 
class="cmtt-10">execRowAction</span>
     method
     on
     table
     pages
     is
     used
     to
     trigger
     an
     action
     when
     a
     row
     is
     selected
     with
     a
     double
     click
     or
     <span 
class="cmcsc-10">&#x003C;E<span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span>&#x003E;</span>.</span></div><!--tex4ht:label?: x74-74028r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74030r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74031r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-74032"></a><span 
class="cmtt-9">execRowAction</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">ITableRow</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">row</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74033r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getMenu</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">EditPersonMenu</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">execAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-74034r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 781--><p class="indent" >    To open the person form with a double click on a person row or by hitting the <span 
class="cmmi-10">&#x003C;</span><span 
class="cmcsc-10">E<span 
class="small-caps">n</span><span 
class="small-caps">t</span><span 
class="small-caps">e</span><span 
class="small-caps">r</span></span><span 
class="cmmi-10">&#x003E; </span>key, you
may add a corresponding <span 
class="cmtt-10">execRowAction </span>on the person page. This method can be added to the person
table by clicking on the green plus icon next to the operation <span 
class="cmti-10">Exec Row Action </span>as shown in Figure&#x00A0;<a 
href="#x74-7402730">5.30<!--tex4ht:ref: fig:person_table_properties --></a>.
For the implementation of this method you may reuse the functionality implemented for the context
menu according to Listing&#x00A0;<a 
href="#x74-74028r19">5.19<!--tex4ht:ref: lst:mycontacts.desktop.outline.personpage.execrowaction --></a>.
    <h4 class="subsectionHead"><span class="titlemark">5.7.4   </span> <a 
 id="x74-750005.7.4"></a>Adding the Company Smartfield</h4>
<!--l. 788--><p class="noindent" >At the current stage of the &#8221;My Contacts&#8221; application, we have no option to manage the relationship
between people and companies. To manage this relation, we now add a company smart field to the person
form. This smart field will then hold the current assignment of the person represented in the person
form.
<!--l. 792--><p class="indent" >    A Scout smart field can be viewed as user friendly dropdown field on steroids that also implements
<span 
class="cmti-10">search-as-you-type </span>to pick a specific entry. In the simplest case the smart field provides access to a small
and locally provided list of key value pairs. But for the intended use in the &#8221;My Contacts&#8221; application, we
will need to access a list of elements provided by the server that will be compiled dynamically at
runtime.
<!--l. 796--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7500131"></a>
                                                                                 

                                                                                 

<!--l. 797--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_lookupcall_company_contextmenu.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.31: </span><span  
class="content">Add a lookup call to the applications shared node.</span></div><!--tex4ht:label?: x74-7500131 -->
                                                                                 

                                                                                 
<!--l. 800--><p class="indent" >    </div><hr class="endfigure">
<!--l. 802--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7500232"></a>
                                                                                 

                                                                                 

<!--l. 803--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_lookupcall_company_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_lookupcall_company_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.32: </span><span  
class="content">The two wizard steps to enter the details of the company lookup call.</span></div><!--tex4ht:label?: x74-7500232 -->
                                                                                 

                                                                                 
<!--l. 807--><p class="indent" >    </div><hr class="endfigure">
<!--l. 809--><p class="indent" >    To create the access to this list, we start with the creation of the company lookup call. As shown
in Figure&#x00A0;<a 
href="#x74-7500131">5.31<!--tex4ht:ref: fig:new_lookupcall_company_contextmenu --></a> the lookup call is added on the <span 
class="cmti-10">Lookup Calls </span>folder under the green shared
node of the &#8221;My Contacts&#8221; application. This opens the <span 
class="cmti-10">New Lookup Call </span>wizard as shown in
Figure&#x00A0;<a 
href="#x74-7500232">5.32<!--tex4ht:ref: fig:new_lookupcall_company --></a>. In the first wizard step, enter &#8221;Company&#8221; into the <span 
class="cmti-10">Class Name </span>field and verify that the
wizard step looks the same as the screenshot shown on the left hand side of Figure&#x00A0;<a 
href="#x74-7500232">5.32<!--tex4ht:ref: fig:new_lookupcall_company --></a>.
Before the wizard is closed, click on the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button to move to the second wizard step.
As shown on the right hand side of Figure&#x00A0;<a 
href="#x74-7500232">5.32<!--tex4ht:ref: fig:new_lookupcall_company --></a> the wizard will also create a corresponding
<span 
class="cmtt-10">CompanyLookupService </span>on the application&#8217;s server. We can now close this wizard with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
    <!--l. 824--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 824--><p class="indent" >    <a 
 id="x74-75003r20"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-75004"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.20:
  </span><span  
class="content">The
  company
  lookup
  call
  with
  its
  <span 
class="cmtt-10">getConfiguredService</span>
  method
  in
  the
  application&#8217;s
  shared
  plugin.</span></div><!--tex4ht:label?: x74-75003r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75005r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-75006"></a><span 
class="cmtt-9">CompanyLookupCall</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-75007"></a><span 
class="cmtt-9">LookupCall</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75008r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75009r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">final</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">long</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">serialVersionUID</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">1</span><span 
class="cmtt-9">L</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75010r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75011r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75012r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Class</span><span 
class="cmtt-9">&#x003C;?</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ILookupService</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-75013"></a><span 
class="cmtt-9">getConfiguredService</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75014r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ICompanyLookupService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75015r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75016r9"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <!--l. 834--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 834--><p class="indent" >    <a 
 id="x74-75017r21"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-75018"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.21:
  </span><span  
class="content">The
  company
  lookup
  service
  in
  the
  application&#8217;s
  server
  plugin.
  The
  <span 
class="cmtt-10">key</span>
  and
  the
  <span 
class="cmtt-10">text</span>
  criteria
  are
  used
  to
  search
  for
  values
  by
  key
  or
  by
  the
  provided
  name
  substring.
  index</span></div><!--tex4ht:label?: x74-75017r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75019r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CompanyLookupService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractSqlLookupService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">implements</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ICompanyLookupService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75020r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75021r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75022r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredSqlSelect</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75023r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75024r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75025r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75026r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">COMPANY</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75027r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">1=1</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75028r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">key</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AND</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">key</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;/</span><span 
class="cmtt-9">key</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75029r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">text</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AND</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UPPER</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LIKE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UPPER</span><span 
class="cmtt-9">(:</span><span 
class="cmtt-9">text</span><span 
class="cmtt-9">||&#8217;%&#8217;)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;/</span><span 
class="cmtt-9">text</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75030r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">all</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;/</span><span 
class="cmtt-9">all</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75031r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75032r14"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 836--><p class="indent" >    The <span 
class="cmtt-10">CompanyLookupCall </span>just created by the Scout SDK wizard is provided in Listing&#x00A0;<a 
href="#x74-75003r20">5.20<!--tex4ht:ref: lst:mycontacts.shared.lookup.companylookupcall --></a>. As we
can see, the only method implemented is <span 
class="cmtt-10">getConfiguredService </span>that points to the specific server
service to be used. In the Scout Explorer, the new company lookup service can be found in
the <span 
class="cmti-10">Lookup Services </span>folder under the blue server node of the application. In this service, we
need to implement method <span 
class="cmtt-10">getConfiguredSqlSelect </span>as shown in Listing&#x00A0;<a 
href="#x74-75017r21">5.21<!--tex4ht:ref: lst:mycontacts.server.lookup.companylookupservice --></a>. For Scout
lookup services, specific <span 
class="cmti-10">key</span>, <span 
class="cmti-10">text </span>and <span 
class="cmti-10">all </span>criteria blocks need to be provided. This criteria
are included in the <span 
class="cmtt-10">SELECT </span>statement using the <span 
class="cmtt-10">&#x003C;key&#x003E;</span>, <span 
class="cmtt-10">&#x003C;text&#x003E; </span>and <span 
class="cmtt-10">&#x003C;all&#x003E; </span>tags as shown in
the listing. The Scout runtime uses the <span 
class="cmtt-10">&#x003C;key&#x003E;</span>-block in cases where a specific key is already
assigned to the smart field. The <span 
class="cmtt-10">&#x003C;text&#x003E;</span>-block is used as a query criteria to create the dynamic
<span 
class="cmti-10">search-as-you-type </span>hit list based on the (sub)string entered by the user so far. Finally, the
<span 
class="cmtt-10">&#x003C;text&#x003E;</span>-block is used to define the hit list to be shown when the user does not enter any text into the
smart field but clicks on the field&#8217;s search icon instead. The bind variable <span 
class="cmtt-10">:key </span>and <span 
class="cmtt-10">:text </span>are
provided by Scout and hold the value of the assigned key or the text entered into the smart
field.
<!--l. 847--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7503333"></a>
                                                                                 

                                                                                 

<!--l. 848--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_smartfield_company_contextmenu.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.33: </span><span  
class="content">Add a smart field to the person form.</span></div><!--tex4ht:label?: x74-7503333 -->
                                                                                 

                                                                                 
<!--l. 851--><p class="indent" >    </div><hr class="endfigure">
<!--l. 853--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7503434"></a>
                                                                                 

                                                                                 

<!--l. 854--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_smartfield_company_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_smartfield_company_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.34: </span><span  
class="content">Create the company smart field for the person form.</span></div><!--tex4ht:label?: x74-7503434 -->
                                                                                 

                                                                                 
<!--l. 858--><p class="indent" >    </div><hr class="endfigure">
<!--l. 860--><p class="indent" >    We are now ready to add the company smart field to the person form. To start the <span 
class="cmti-10">New Form Field</span>
wizard we use the context menu on the <span 
class="cmtt-10">DetailBox </span>of the person form as shown in Figure&#x00A0;<a 
href="#x74-7503434">5.34<!--tex4ht:ref: fig:new_smartfield_company --></a>. In the
first wizard step, we chose the <span 
class="cmti-10">SmartField </span>entry as the field type and click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. Then, we
enter &#8221;Company&#8221; into the <span 
class="cmti-10">Name </span>field as shown on the right hand side of Figure&#x00A0;<a 
href="#x74-7503434">5.34<!--tex4ht:ref: fig:new_smartfield_company --></a>. Make sure that you
select the <span 
class="cmti-10">String </span>entry in the <span 
class="cmti-10">Generic Type </span>field as we are using string values to identify companies in the
&#8221;My Contacts&#8221; application. And in the <span 
class="cmti-10">LookupCall </span>field, we can now select the <span 
class="cmti-10">CompanyLookupCall </span>that
we have just created before. Finally, the position of the new company smart field can be
set in the <span 
class="cmti-10">Sibling </span>field before the location field before the wizard is closed with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
    <!--l. 875--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 875--><p class="indent" >    <a 
 id="x74-75035r22"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-75036"></a>

       <div class="caption" 
><span class="id">Listing&#x00A0;5.22:
       </span><span  
class="content">The
       smart
       field
       <span 
class="cmtt-10">CompanyField</span>
       of
       the
       person
       form
       and
       its
       wiring
       with
       the
       company
       lookup
       call.</span></div><!--tex4ht:label?: x74-75035r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75037r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(20.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75038r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CompanyField</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-75039"></a><span 
class="cmtt-9">AbstractSmartField</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75040r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75041r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75042r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredLabel</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75043r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">Company</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75044r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75045r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75046r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75047r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Class</span><span 
class="cmtt-9">&#x003C;?</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LookupCall</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-75048"></a><span 
class="cmtt-9">getConfiguredLookupCall</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75049r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CompanyLookupCall</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75050r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75051r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-75052r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 877--><p class="indent" >    The implementation of the company smart field created by the Scout SDK wizard is provided in
Listing&#x00A0;<a 
href="#x74-75035r22">5.22<!--tex4ht:ref: lst:mycontacts.client.forms.person.companyfield --></a>. A look at the implementation of the <span 
class="cmtt-10">CompanyField </span>class shows its simplicity and the wiring
with the company lookup service.
    <h4 class="subsectionHead"><span class="titlemark">5.7.5   </span> <a 
 id="x74-760005.7.5"></a>Adding the Map Form</h4>
<!--l. 883--><p class="noindent" >We now want to add the &#8221;Map&#8221; form shown in the front of Figure&#x00A0;<a 
href="#x74-630031">5.1<!--tex4ht:ref: fig:my_contacts_swt --></a>. The purpose of this form is to show a
map corresponding to the address entered into the <span 
class="cmti-10">location </span>field of the person form using the Google Maps
Image API<span class="footnote-mark"><a 
href="book87.html#fn13x7"><sup class="textsuperscript">13</sup></a></span><a 
 id="x74-76001f13"></a> .
This also implies that only addresses that can correctly be parsed by the Maps Image API will lead to a
useful map image.
<!--l. 889--><p class="indent" >    To create the maps form we start the <span 
class="cmti-10">New Form </span>wizard and enter the new translated
text &#8221;Map&#8221; into the <span 
class="cmti-10">Name </span>field of the first wizard step. Then, we click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button
to configure the artefacts to be created by the wizard. For the map form we can use the
configuration as shown on the right hand side of Figure&#x00A0;<a 
href="#x74-7300127">5.27<!--tex4ht:ref: fig:new_form_url --></a> with the difference that we do not need
the Ok button. Having deselected most artefacts, the wizard can be closed with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
<!--l. 894--><p class="indent" >    After the form creation wizard has been closed, update the label of the cancel button to &#8221;Close&#8221; in
the button&#8217;s Scout Object Properties. Then, we can add an &#8221;Address&#8221; variable to the form by starting
the <span 
class="cmti-10">New Property Bean </span>wizard on the <span 
class="cmti-10">Variables </span>node of the newly created map form. In
the property bean wizard, enter &#8221;Name&#8221; into the <span 
class="cmti-10">Name </span>field and set the <span 
class="cmti-10">Bean type </span>field to
<span 
class="cmti-10">String</span>.
<!--l. 898--><p class="indent" >    As the next step, the map image field is added to the from. For this, start the <span 
class="cmti-10">New Form Field</span>
wizard directly on the form&#8217;s <span 
class="cmti-10">MainBox </span>node. In the first form field wizard step, select <span 
class="cmti-10">ImageField </span>as the
field type and click on the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button. Before you can close the second wizard step with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button, enter &#8221;Map&#8221; into the <span 
class="cmti-10">Class Name </span>field. To set the properties of the new map field,
select the <span 
class="cmti-10">MapField </span>node below the main box node of the map form. In the <span 
class="cmtt-10">MapField</span>&#8217;s Scout
Object Properties untick the <span 
class="cmti-10">Label Visible </span>property and add an <span 
class="cmtt-10">execInitField </span>method by
clicking on the green plus icon next to this operation. The configuration of the map field can
then be completed in section <span 
class="cmti-10">Advanced Properties</span>. Here, we set the <span 
class="cmti-10">Grid H </span>property to 6
and update the <span 
class="cmti-10">Width in Pixel </span>property and the <span 
class="cmti-10">Height in Pixel </span>property to a value of 400
each.
    <!--l. 915--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 915--><p class="indent" >    <a 
 id="x74-76002r23"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-76003"></a>

       <div class="caption" 
><span class="id">Listing&#x00A0;5.23:
       </span><span  
class="content">In
       the
       <span 
class="cmtt-10">execInitField</span>
       method
       of
       the
       map
       form
       the
       image
       content
       is
       fetched
       from
       the
       Google
       Maps
       API.</span></div><!--tex4ht:label?: x74-76002r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76004r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76005r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-76006"></a><span 
class="cmtt-9">execInitField</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76007r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">address</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">StringUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">nvl</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">getAddress</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76008r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">size</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredHeightInPixel</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">x</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredWidthInPixel</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76009r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76010r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76011r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">try</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76012r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">://</span><span 
class="cmtt-9">maps</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">googleapis</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">com</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">maps</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">api</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">staticmap</span><span 
class="cmtt-9">?</span><span 
class="cmtt-9">center</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76013r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">URLEncoder</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">encode</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">address</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">ISO</span><span 
class="cmtt-9">-8859-1</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76014r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&amp;</span><span 
class="cmtt-9">zoom</span><span 
class="cmtt-9">=13&amp;</span><span 
class="cmtt-9">size</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">size</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&amp;</span><span 
class="cmtt-9">maptype</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">roadmap</span><span 
class="cmtt-9">&amp;</span><span 
class="cmtt-9">sensor</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">false</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76015r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setImage</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IOUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getContent</span><span 
class="cmtt-9">((</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">URL</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">openStream</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76016r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76017r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">catch</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Exception</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">e</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76018r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setErrorStatus</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingStatus</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">Bad</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Link</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#8217;,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">please</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">check</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76019r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingStatus</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">ERROR</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76020r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setImage</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76021r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">e</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">printStackTrace</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76022r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76023r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 917--><p class="indent" >    To add the Java code to display the map in the image field, click on the <span 
class="cmti-10">execInitField </span>link in the
Scout Object Properties of the map field. According to the implementation provided in Listing&#x00A0;<a 
href="#x74-76002r23">5.23<!--tex4ht:ref: lst:mycontacts.client.forms.map --></a>, an
URL for the Maps Image API is first constructed. This URL also contains the content of the map form&#8217;s
address variable and the configured dimension of the map field. The map picture returned by the Google
API is then read using <span 
class="cmtt-10">IOUtility.getContent </span>and directly fed into the image fields <span 
class="cmtt-10">setImage</span>
method.
<!--l. 922--><p class="indent" >    The last step involving the implementation of the map form feature is its integration into the person
form. As visible on the lower left part of the person form shown in Figure&#x00A0;<a 
href="#x74-630031">5.1<!--tex4ht:ref: fig:my_contacts_swt --></a>, a <span 
class="cmti-10">Show Map ... </span>link is
available. We now need to add such a link to the person form and add the necessary wiring for opening
the newly created map form if the user clicks on this link. As a first step, the <span 
class="cmti-10">New Form Field </span>wizard is
started on the <span 
class="cmti-10">MainBox </span>node. In the first wizard step, select the <span 
class="cmti-10">LinkButton </span>from the available field
types and click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button to load the second wizard step. Here, just enter the new
translated text &#8221;Show Map ...&#8221; into the <span 
class="cmti-10">Name </span>field and close the wizard with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
    <!--l. 937--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 937--><p class="indent" >    <a 
 id="x74-76024r24"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-76025"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.24:
    </span><span  
class="content">The
    edit
    menu
    implemented
    in
    class
    <span 
class="cmtt-10">EditURLMenu</span>
    of
    the
    picture
    field.
    If
    the
    URL
    was
    changed
    the
    picture
    URL
    field
    of
    the
    person
    form
    is
    set
    accordingly
    in
    method
    <span 
class="cmtt-10">execAction</span></span></div><!--tex4ht:label?: x74-76024r5.7 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76026r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(50.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76027r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ShowMapButton</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractLinkButton</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76028r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76029r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76030r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredLabel</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76031r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">ShowMap</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76032r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76033r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76034r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76035r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-76036"></a><span 
class="cmtt-9">execClickAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76037r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">MapForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">mapForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">MapForm</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76038r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">mapForm</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setAddress</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">getLocationField</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76039r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">mapForm</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">startModify</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76040r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76041r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-76042r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 939--><p class="indent" >    To add the necessary wiring code to the link button double click the <span 
class="cmti-10">ShowMapButton </span>node in the
Scout Explorer and implement its <span 
class="cmtt-10">execClickAction </span>method. As shown in Listing&#x00A0;<a 
href="#x74-76024r24">5.24<!--tex4ht:ref: lst:mycontacts.client.forms.person.clickmaplink --></a>, we only need to
create a new map form in the click action, set its address variable and open the form with
<span 
class="cmtt-10">form.startModify</span>.
    <h3 class="sectionHead"><span class="titlemark">5.8   </span> <a 
 id="x74-770005.8"></a>Managing Person Data on the Server Side</h3>
    <!--l. 952--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 952--><p class="indent" >    <a 
 id="x74-77001r25"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-77002"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.25:
    </span><span  
class="content">The
    <span 
class="cmtt-10">execLoad</span>
    and
    the
    <span 
class="cmtt-10">execStore</span>
    methods
    of
    the
    person
    form&#8217;s
    modify
    handler.</span></div><!--tex4ht:label?: x74-77001r5.8 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77003r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-77004"></a><span 
class="cmtt-9">ModifyHandler</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-77005"></a><span 
class="cmtt-9">AbstractFormHandler</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77006r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77007r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77008r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">execLoad</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77009r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IPersonService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">service</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IPersonService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77010r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77011r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">exportFormData</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77012r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">service</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">load</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77013r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">importFormData</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77014r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setEnabledPermission</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UpdatePersonPermission</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77015r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77016r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77017r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77018r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">execStore</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77019r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IPersonService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">service</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IPersonService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77020r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77021r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">exportFormData</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77022r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">service</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">store</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77023r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77024r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 954--><p class="indent" >    In the &#8221;My Contacts&#8221; client application the person form is started via two separate form handlers
called by the person page context menus. The new handler is used to start the form in the mode to create
new persons while the modify handler is implemented to start the form for updating existing persons.
When we look at the implementation of the modify handler provided in Listing&#x00A0;<a 
href="#x74-77001r25">5.25<!--tex4ht:ref: lst:mycontacts.client.personform.modifyhandler --></a>, we see the two
methods <span 
class="cmtt-10">execLoad </span>and <span 
class="cmtt-10">execStore</span>.
<!--l. 958--><p class="indent" >    As already described in Section&#x00A0;<a 
href="bookch4.html#x40-370003.2.3">3.2.3<!--tex4ht:ref: sec:helloworld.formhandler --></a> of the &#8221;Hello World&#8221; tutorial, <span 
class="cmtt-10">execLoad </span>is called by the Scout
framework the the form is started. Similarly, method <span 
class="cmtt-10">execStore </span>is called by the Scout framework after
the user has clicked the <span 
class="cmcsc-10">OK </span>button of a form. In both methods, a corresponding service operation of the
<span 
class="cmtt-10">PersonService </span>is called. From the form handler&#8217;s <span 
class="cmtt-10">execLoad </span>method the method <span 
class="cmtt-10">load </span>of the person
service is called. And the form handler&#8217;s <span 
class="cmtt-10">execStore </span>method calls the person service&#8217;s method <span 
class="cmtt-10">store </span>as
shown in Listing&#x00A0;<a 
href="#x74-77027r26">5.26<!--tex4ht:ref: lst:mycontacts.server.services.personservice.load --></a>.
    <!--l. 971--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 971--><p class="indent" >    <a 
 id="x74-77027r26"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-77028"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.26:
  </span><span  
class="content">The
  <span 
class="cmtt-10">load</span>
  and
  the
  <span 
class="cmtt-10">store</span>
  methods
  of
  the
  server&#8217;s
  <span 
class="cmtt-10">PersonService</span>.</span></div><!--tex4ht:label?: x74-77027r5.8 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77029r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-77030"></a><span 
class="cmtt-9">PersonService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">implements</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IPersonService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77031r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77032r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">load</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77033r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(!</span><span 
class="cmtt-9">ACCESS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">check</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ReadPersonPermission</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77034r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throw</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VetoException</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">AuthorizationFailed</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77035r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77036r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77037r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">selectInto</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77038r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">picture_url</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77039r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">first_name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77040r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">last_name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77041r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77042r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77043r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77044r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">date_of_birth</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77045r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77046r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON_ID</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">personId</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77047r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77048r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">pictureUrl</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77049r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">firstName</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77050r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">lastName</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77051r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">company</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77052r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77053r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77054r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">dateOfBirth</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77055r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77056r27"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77057r28"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77058r29"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77059r30"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77060r31"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77061r32"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">store</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77062r33"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(!</span><span 
class="cmtt-9">ACCESS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">check</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UpdatePersonPermission</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77063r34"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throw</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VetoException</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">AuthorizationFailed</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77064r35"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77065r36"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">update</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">UPDATE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SET</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77066r37"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">picture_url</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">pictureUrl</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77067r38"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">first_name</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">firstName</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77068r39"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">last_name</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">lastName</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77069r40"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77070r41"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">company_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">company</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77071r42"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77072r43"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">date_of_birth</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">dateOfBirth</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77073r44"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">person_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">personId</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77074r45"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77075r46"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77076r47"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77077r48"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77078r49"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 973--><p class="indent" >    For the <span 
class="cmtt-10">load </span>method in Listing&#x00A0;<a 
href="#x74-77027r26">5.26<!--tex4ht:ref: lst:mycontacts.server.services.personservice.load --></a> it is assumed that the in the provided parameter <span 
class="cmtt-10">formData </span>the
person&#8217;s id is available as a search criteria. It might be interesting to note that for the SQL <span 
class="cmtt-10">SELECT </span>and
<span 
class="cmtt-10">UPDATE </span>statements we can provide the complete form data to use Scout&#8217;s support for bind
variables.
<!--l. 976--><p class="indent" >    The implementation of the person form&#8217;s new handler is implemented similar to it&#8217;s modify handler.
Instead of calling the service operations <span 
class="cmtt-10">load </span>and <span 
class="cmtt-10">store</span>, the methods <span 
class="cmtt-10">prepareCreate </span>and <span 
class="cmtt-10">create </span>are
used. In principle, method <span 
class="cmtt-10">prepareCreate </span>is not needed for the &#8221;My Contacts&#8221; application. As its
implementation has been created by the Scout SDK wizard, it does not any harm when the method is left
as it is.
    <!--l. 988--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 988--><p class="indent" >    <a 
 id="x74-77079r27"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-77080"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.27:
  </span><span  
class="content">The
  <span 
class="cmtt-10">create</span>
  method
  of
  the
  server&#8217;s
  <span 
class="cmtt-10">PersonService</span>.</span></div><!--tex4ht:label?: x74-77079r5.8 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77081r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-77082"></a><span 
class="cmtt-9">PersonService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">implements</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IPersonService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77083r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77084r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">create</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77085r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(!</span><span 
class="cmtt-9">ACCESS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">check</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">CreatePersonPermission</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77086r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throw</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">VetoException</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">AuthorizationFailed</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77087r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77088r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77089r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">StringUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">isNullOrEmpty</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getPersonId</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77090r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setPersonId</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">UUID</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">randomUUID</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">toString</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77091r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77092r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77093r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">INSERT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person_id</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77094r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">personId</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77095r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PERSON</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77096r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">person_id</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">personId</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77097r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">HAVING</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">count</span><span 
class="cmtt-9">(*)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77098r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77099r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77100r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">store</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77101r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-77102r21"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 990--><p class="indent" >    In Listing&#x00A0;<a 
href="#x74-77079r27">5.27<!--tex4ht:ref: lst:mycontacts.server.services.personservice.create --></a> the implementation of the <span 
class="cmtt-10">PersonService</span>&#8217;s <span 
class="cmtt-10">create </span>method is provided.
First, the implementation checks if the provided form data contains a person id. If the person
has been entered manually a value for this id is missing and a new id is provided using
<span 
class="cmtt-10">formData.setPersonId(UUID.randomUUID().toString())</span>. The only responsibility of the <span 
class="cmtt-10">INSERT</span>
statement following the person id check is to make sure we will have a row in the <span 
class="cmtt-10">PERSON </span>table for the
person to be created. To save all other form data parameters, we just need to call the previously
implemented <span 
class="cmtt-10">store </span>method.
    <h3 class="sectionHead"><span class="titlemark">5.9   </span> <a 
 id="x74-780005.9"></a>Creating the Company Form</h3>
<!--l. 1000--><p class="noindent" >Creating the company form and the necessary backend services is not described here. Instead this
task is left as an exercise to the reader and in the text below some minimal guidelines are
provided.
<!--l. 1003--><p class="indent" >    The main trick is to start with the <span 
class="cmti-10">New Form </span>wizard to create the company form. This will create all
necessary artefacts including the forms, necessary server services, and communication between the client
and the server. Then, make sure you don&#8217;t forget to add a variable <span 
class="cmtt-10">companyId </span>to the company form. To
decide on the fields that need to be on the company form you may check the setup of the database
schema provided in Listing&#x00A0;<a 
href="#x74-68001r9">5.9<!--tex4ht:ref: lst:mycontacts.server.services.installdb.company --></a>. If in doubt about what to do, please refer to the procedure used to create
the person form.
<!--l. 1009--><p class="indent" >    In case you get lost completely, you may download the &#8221;My Contacts&#8221;
application from this books Github repository as described in the Scout
wiki<span class="footnote-mark"><a 
href="book88.html#fn14x7"><sup class="textsuperscript">14</sup></a></span><a 
 id="x74-78001f14"></a> .
    <h3 class="sectionHead"><span class="titlemark">5.10   </span> <a 
 id="x74-790005.10"></a>Adding the Scribe Library to the Application</h3>
<!--l. 1016--><p class="noindent" >To access data from sites such as LinkedIn, Xing, Google+ or Facebook, most social networks provide an API that
requires user authentication. The current defacto standard for such authentication is the Open Authentication
Protocol (OAuth)<span class="footnote-mark"><a 
href="book89.html#fn15x7"><sup class="textsuperscript">15</sup></a></span><a 
 id="x74-79001f15"></a> 
<!--l. 1021--><p class="indent" >    The big advantage of the OAuth standard is the access token based authentication. If an application
such as the &#8221;My Contacts&#8221; example is in possession of an access token, it can fetch data from the hosting
site or even act on the users behalf. It is important to note that the access token is just constructed
of two values, the token and the secret. And both values are completely separate from the
                                                                                 

                                                                                 
user&#8217;s username and password credentials. This means that an access token may be safely
stored in other applications. Should such an application&#8217;s data get compromised, the username
and password are still save. The user then has the option to remove the compromised access
token.
<!--l. 1029--><p class="indent" >    For the &#8221;My Contacts&#8221; application we use the Scribe Java
library<span class="footnote-mark"><a 
href="book90.html#fn16x7"><sup class="textsuperscript">16</sup></a></span><a 
 id="x74-79002f16"></a> 
This library makes accessing social services very simple. At the same time the Scribe library is used here
to demonstrate the integration of external Java libraries in Scout applications.
<!--l. 1035--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7900335"></a>
                                                                                 

                                                                                 

<!--l. 1036--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_library_scribe_contextmenu.png" alt="PIC"  
> &#x00A0;
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.35: </span><span  
class="content">Add a new bundle to hold the Scribe JARs.</span></div><!--tex4ht:label?: x74-7900335 -->
                                                                                 

                                                                                 
<!--l. 1039--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1041--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-7900436"></a>
                                                                                 

                                                                                 

<!--l. 1042--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_library_scribe_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_library_scribe_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.36: </span><span  
class="content">Specify the JARs to be contained in the library bundle and the library name.</span></div><!--tex4ht:label?: x74-7900436 -->
                                                                                 

                                                                                 
<!--l. 1046--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1048--><p class="indent" >    As we will use the Scribe library only on the Scout server side start the Scout SDK
<span 
class="cmti-10">New Library Bundle </span>wizard below the blue server node as shown in Figure&#x00A0;<a 
href="#x74-7900335">5.35<!--tex4ht:ref: fig:new_library_scribe_contextmenu --></a>. In the first
wizard step shown on the left side of Figure&#x00A0;<a 
href="#x74-7900436">5.36<!--tex4ht:ref: fig:new_library_scribe --></a> add the files <span class="path"><span 
class="cmtt-10">scribe-1.3.0.jar</span></span> and
<span class="path"><span 
class="cmtt-10">commons-codec-1.8.jar</span></span><span class="footnote-mark"><a 
href="book91.html#fn17x7"><sup class="textsuperscript">17</sup></a></span><a 
 id="x74-79005f17"></a> 
using the <span 
class="cmcsc-10">A<span 
class="small-caps">d</span><span 
class="small-caps">d</span> </span>button. Once the two JAR files are listed in the library list of the wizard click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span></span>
button. On the second wizard step, enter &#8221;org.scribe&#8221; into the <span 
class="cmti-10">Bundle Name </span>field as shown on the right
side of Figure&#x00A0;<a 
href="#x74-7900436">5.36<!--tex4ht:ref: fig:new_library_scribe --></a>. Then, close the wizard with the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span> </span>button.
<!--l. 1057--><p class="indent" >    The Scout SDK wizard then creates the corresponding library plugin and updates the server product
files and the plugin dependencies of the applications server plugin accordingly. Once the wizard has
completed the classes defined in the two JAR files can directly be accessed from the &#8221;My Contact&#8221;
application&#8217;s server plugin.
    <h3 class="sectionHead"><span class="titlemark">5.11   </span> <a 
 id="x74-800005.11"></a>Integrating LinkedIn Access with Scribe</h3>
    <!--l. 1070--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1070--><p class="indent" >    <a 
 id="x74-80001r28"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-80002"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.28:
    </span><span  
class="content">The
    <span 
class="cmtt-10">LinkedInService</span>
    service
    with
    it&#8217;s
    <span 
class="cmtt-10">initializeService</span>
    method
    defined
    in
    the
    <span 
class="cmtt-10">IService</span>
    interface.</span></div><!--tex4ht:label?: x74-80001r5.11 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80003r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LinkedInService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">implements</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ILinkedInService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80004r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">final</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_TOKEN</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">linkedin_access_token</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80005r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">final</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_SECRET</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">linkedin_access_secret</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80006r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">final</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_CONNECTIONS</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">://</span><span 
class="cmtt-9">api</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">linkedin</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">com</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">v1</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">people</span><span 
class="cmtt-9">/~/</span><span 
class="cmtt-9">connections</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80007r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80008r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IScoutLogger</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LOG</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ScoutLogManager</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getLogger</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">LinkedInService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80009r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">OAuthService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_service</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80010r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80011r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80012r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-80013"></a><span 
class="cmtt-9">initializeService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">ServiceRegistration</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">registration</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80014r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">super</span><span 
class="cmtt-9">.</span><a 
 id="dx74-80015"></a><span 
class="cmtt-9">initializeService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">registration</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80016r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80017r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_service</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ServiceBuilder</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80018r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">provider</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">LinkedInApi</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80019r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">apiKey</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">CiEgwWDkA5BFpNrc0RfGyVuSlOh4tig5kOTZ9q97qcXNrFl7zqk</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">Ts7DqRGaKDCV</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80020r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">apiSecret</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">dhho4dfoCmiQXrkw4yslork5XWLFnPSuMR</span><span 
class="cmtt-9">-8</span><span 
class="cmtt-9">gscPVjY4jqFFHPYWJKgpFl4uLTM6</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80021r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">build</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80022r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1072--><p class="indent" >    To access the LinkedIn data with Scribe a separate service <span 
class="cmtt-10">LinkedInService </span>is created in the <span 
class="cmti-10">Services</span>
folder under the blue server node. Before we add any service operations to the LinkedIn service, the service
initialization method is implemented according to Listing&#x00A0;<a 
href="#x74-80001r28">5.28<!--tex4ht:ref: lst:mycontacts.server.linkedin.initialize --></a>. This initialization is not discussed further
here. Instead, the interested reader is referred to the corresponding <span 
class="cmtt-10">LinkedInExample </span>on the Scribe web
pages<span class="footnote-mark"><a 
href="book92.html#fn18x7"><sup class="textsuperscript">18</sup></a></span><a 
 id="x74-80023f18"></a> .
<!--l. 1079--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-8002437"></a>
                                                                                 

                                                                                 

<!--l. 1080--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_operation_authurl_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_operation_authurl.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.37: </span><span  
class="content">Add the operation to retrieve an authentication URL.</span></div><!--tex4ht:label?: x74-8002437 -->
                                                                                 

                                                                                 
<!--l. 1084--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 1093--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1093--><p class="indent" >    <a 
 id="x74-80025r29"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-80026"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.29:
    </span><span  
class="content">The
    <span 
class="cmtt-10">getAuthUrl</span>
    method
    of
    the
    LinkedIn
    service.</span></div><!--tex4ht:label?: x74-80025r5.11 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80027r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80028r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">[]</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getAuthUrl</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80029r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Token</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">requestToken</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_service</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getRequestToken</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80030r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">authLink</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_service</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getAuthorizationUrl</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">requestToken</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80031r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">[]{</span><span 
class="cmtt-9">requestToken</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getToken</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">requestToken</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getSecret</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">authLink</span><span 
class="cmtt-9">};</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80032r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1095--><p class="indent" >    The first service operation <span 
class="cmtt-10">getAuthUrl </span>is added according to Figure&#x00A0;<a 
href="#x74-8002437">5.37<!--tex4ht:ref: fig:new_operation_authurl --></a>. This operation will return
the necessary information to create a request token and provides a link to open in a web
browser to start the authentication against the LinkedIn account. For its implementation see
Listing&#x00A0;<a 
href="#x74-80025r29">5.29<!--tex4ht:ref: lst:mycontacts.server.linkedin.authurl --></a>.
<!--l. 1099--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-8003538"></a>
                                                                                 

                                                                                 

<!--l. 1100--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_operation_refreshtoken.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_operation_updatecontacts.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.38: </span><span  
class="content">Add the operations to refresh the access token and to update the LinkedIn contacts.</span></div><!--tex4ht:label?: x74-8003538 -->
                                                                                 

                                                                                 
<!--l. 1104--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 1112--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1112--><p class="indent" >    <a 
 id="x74-80036r30"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-80037"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.30:
    </span><span  
class="content">The
    <span 
class="cmtt-10">refreshToken</span>
    method
    is
    used
    to
    create
    a
    new
    access
    token
    to
    fetch
    data
    from
    the
    LinkedIn
    API.</span></div><!--tex4ht:label?: x74-80036r5.11 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80038r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80039r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">refreshToken</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">securityCode</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80040r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">retrieve</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">linked</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">in</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">access</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80041r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Token</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">accessToken</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_service</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getAccessToken</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Token</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Verifier</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">securityCode</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80042r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80043r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">make</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">sure</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">current</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">user</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">has</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">records</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">for</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">linkedin</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80044r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ServerSession</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getUserId</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80045r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80046r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">INSERT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80047r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">as</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">as</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80048r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80049r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AND</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">HAVING</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">count</span><span 
class="cmtt-9">(*)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80050r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_TOKEN</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80051r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80052r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">insert</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">INSERT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80053r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">as</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">as</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80054r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80055r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AND</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">HAVING</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">count</span><span 
class="cmtt-9">(*)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80056r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_SECRET</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80057r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80058r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">update</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">records</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">with</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">access</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80059r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">update</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">UPDATE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">set</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AND</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80060r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">accessToken</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getToken</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_TOKEN</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80061r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80062r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">update</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">UPDATE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">set</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AND</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80063r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">accessToken</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getSecret</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_SECRET</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80064r27"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1114--><p class="indent" >    The next operations we add are used to refresh the users access token stored in the &#8221;My Contacts&#8221;
application and to refresh or download the users contacts stored in the user&#8217;s LinkedIn account. See
Figure&#x00A0;<a 
href="#x74-8003538">5.38<!--tex4ht:ref: fig:new_operation_refresh_update --></a> for the necessary details for the creation of the two methods.
<!--l. 1117--><p class="indent" >    Method <span 
class="cmtt-10">refreshToken </span>is implemented according to Listing&#x00A0;<a 
href="#x74-80036r30">5.30<!--tex4ht:ref: lst:mycontacts.server.linkedin.refreshtoken --></a>. Using the provided token
parameters and the security code, the access token is created using <span 
class="cmtt-10">m</span><span 
class="cmtt-10">_service.getAccessToken(...)</span>.
Then, the user id of the currently logged in user is obtained with <span 
class="cmtt-10">ServerSession.get().getUserId()</span>.
Once we have both the access token and the user id available in method refreshToken, we can
store the token and the secret values for the current user in table <span 
class="cmtt-10">USERS</span><span 
class="cmtt-10">_PARAM </span>according to
Listing&#x00A0;<a 
href="#x74-80036r30">5.30<!--tex4ht:ref: lst:mycontacts.server.linkedin.refreshtoken --></a>.
<!--l. 1122--><p class="indent" >    In the current implementation of the &#8221;My Contacts&#8221; application this id will always be set
to <span 
class="cmtt-10">anonymous</span>. The reason for this is the <span 
class="cmtt-10">AnonymousSecurityFilter </span>security filter that is
activated during the initial project creation step. As for logging, and database access, the
configuration of the security filters of the server application is defined in the server&#8217;s <span class="path"><span 
class="cmtt-10">config.ini</span></span>
file.
    <!--l. 1126-->
<div class="lstlisting" id="listing-6"><span class="label"><a 
 id="x74-80067r1"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipse</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">scout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">servletfilter</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">security</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">AnonymousSecurityFilter</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">active</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">true</span>
    </div>
    <!--l. 1137--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1137--><p class="indent" >    <a 
 id="x74-80068r31"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-80069"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.31:
  </span><span  
class="content">The
  default
  configuration
  of
  the
  basic
  security
  filter
  in
  the
  Scout
  server&#8217;s
  <span 
class="cmtt-10">config.ini</span>
  file.</span></div><!--tex4ht:label?: x74-80068r5.11 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80070r1"></a></span><span 
class="cmtt-9">###</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Servlet</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Filter</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Runtime</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Configuration</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80071r2"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipse</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">scout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">servletfilter</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">security</span><span 
class="cmtt-9">.</span><a 
 id="dx74-80072"></a><span 
class="cmtt-9">BasicSecurityFilter</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">active</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">false</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80073r3"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipse</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">scout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">servletfilter</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">security</span><span 
class="cmtt-9">.</span><a 
 id="dx74-80074"></a><span 
class="cmtt-9">BasicSecurityFilter</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">realm</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">contacts</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Development</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80075r4"></a></span><span 
class="cmtt-9">org</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">eclipse</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">scout</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">servletfilter</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">security</span><span 
class="cmtt-9">.</span><a 
 id="dx74-80076"></a><span 
class="cmtt-9">BasicSecurityFilter</span><span 
class="cmtt-9">#</span><span 
class="cmtt-9">users</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">admin</span><span 
class="cmtt-9">\=</span><span 
class="cmtt-9">manager</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">allen</span><span 
class="cmtt-9">\=</span><span 
class="cmtt-9">allen</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">blake</span><span 
class="cmtt-9">\=</span><span 
class="cmtt-9">blake</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1139--><p class="indent" >    If you would like to change the &#8221;My Contacts&#8221; application to a multi-user setup, the next simpler
option is to deactivate the anonymous security filter and use the basic security filter instead.
In the server&#8217;s <span class="path"><span 
class="cmtt-10">config.ini</span></span> file the necessary config lines are already prepared as shown in
Listing&#x00A0;<a 
href="#x74-80068r31">5.31<!--tex4ht:ref: lst:mycontacts.server.configini.securityfilter --></a>. Just set <span 
class="cmtt-10">BasicSecurityFilter#active=true </span>and &#8221;My Contacts&#8221; the client
application will prompt you with a login dialog. In this dialog you may enter one of the login
credentials specified in in the <span 
class="cmtt-10">BasicSecurityFilter#users </span>parameter of the <span class="path"><span 
class="cmtt-10">config.ini</span></span>
file. To log in as user admin, enter password &#8221;manager&#8221;. To add new users, just amend the
<span 
class="cmtt-10">BasicSecurityFilter#users </span>parameter with additional comma separated entries of the form
<span 
class="cmtt-10">username</span><br 
class="newline" /><span class="bar-css"><span 
class="cmtt-10">p</span></span><span 
class="cmtt-10">assword</span>.
    <!--l. 1152--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1152--><p class="indent" >    <a 
 id="x74-80079r32"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-80080"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.32:
    </span><span  
class="content">The
    <span 
class="cmtt-10">updateContacts</span>
    method
    is
    used
    to
    enter/update
    existing
    contacts
    based
    on
    new
    data
    fetched
    from
    LinkedIn.</span></div><!--tex4ht:label?: x74-80079r5.11 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80081r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80082r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">updateContacts</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80083r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">try</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80084r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">IPersonService</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">service</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IPersonService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80085r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NodeList</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">persons</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">readContacts</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80086r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80087r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">for</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">int</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">i</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">i</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">persons</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getLength</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">i</span><span 
class="cmtt-9">++)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80088r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">persons</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">item</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">i</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">instanceof</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Element</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80089r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Element</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Element</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">persons</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">item</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">i</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80090r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LOG</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">info</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getString</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80091r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80092r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">load</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">existing</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">data</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80093r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">PersonFormData</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80094r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setPersonId</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">id</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80095r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">service</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">load</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80096r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80097r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getPictureUrl</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80098r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">picture</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80099r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getFirstName</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80100r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">first</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80101r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getLastName</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80102r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">last</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80103r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getHeadline</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80104r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">StringUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">substring</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">64)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80105r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getLocation</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80106r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80107r27"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80108r28"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">save</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">updated</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">data</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80109r29"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">service</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">create</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">formData</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80110r30"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80111r31"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80112r32"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80113r33"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">catch</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Exception</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">e</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80114r34"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throw</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">LinkedIn</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Error</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">e</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80115r35"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80116r36"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1154--><p class="indent" >    The implementation of service method <span 
class="cmtt-10">updateContacts </span>of the LinkedIn service is provided in
Listing&#x00A0;<a 
href="#x74-80079r32">5.32<!--tex4ht:ref: lst:mycontacts.server.linkedin.updatecontacts --></a>. First, a service reference is obtained to the person process service. Then, the LinkedIn
contacts obtained by method <span 
class="cmtt-10">readContacts </span>are stored in a <span 
class="cmtt-10">persons </span>list object. For each person, a form
data is created and its person id parameter is set to <span 
class="cmtt-10">DomUtility.getValue(person, "id")</span>. Using the
<span 
class="cmtt-10">load </span>method of the person process service all attributes of the person are loaded from the server&#8217;s
database. The new attribute values obtained from the corresponding LinkedIn contact are then used to
update the corresponding form data parameters. The newly updated person form data is then stored in
the database with <span 
class="cmtt-10">service.create(formData)</span>. Before we go through the <span 
class="cmtt-10">readContacts</span>
method, we have a look at the explicit format of the contact data provided by the LinkedIn
API.
    <!--l. 1163-->
                                                                                 

                                                                                 
<!--l. 1169--><p class="indent" >    <a 
 id="x74-80119r33"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-80120"></a>

    <div class="caption" 
><span class="id">Listing&#x00A0;5.33:
    </span><span  
class="content">A
    sample
    contact
    represented
    in
    the
    XML
    format
    provided
    by
    the
    LinkedIn
    API.</span></div><!--tex4ht:label?: x74-80119r5.11 --><div class="lstlisting" id="listing-7"><span class="label"><a 
 id="x74-80121r1"></a></span><span 
class="cmtt-9">&#x003C;?</span><span 
class="cmtt-9">xml</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">version</span><span 
class="cmtt-9">="1.0"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">encoding</span><span 
class="cmtt-9">="</span><span 
class="cmtt-9">UTF</span><span 
class="cmtt-9">-16"</span><span 
class="cmtt-9">?&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80122r2"></a></span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80123r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">id</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">f7R6wGcblj</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">id</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80124r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">first</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">Mike</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">first</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80125r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">last</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">Milinkovich</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">last</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80126r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">Executive</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Director</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">at</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Eclipse</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Foundation</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">headline</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80127r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">picture</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">://</span><span 
class="cmtt-9">m3</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">licdn</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">com</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">mpr</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">mprx</span><span 
class="cmtt-9">/0</span><span 
class="cmtt-9">_IUM7Se9vBU</span><span 
class="cmtt-9">...</span><span 
class="cmtt-9">SbRbQZ4</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">picture</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80128r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">site</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">standard</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">profile</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">request</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80129r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">http</span><span 
class="cmtt-9">://</span><span 
class="cmtt-9">www</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">linkedin</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">com</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">profile</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">view</span><span 
class="cmtt-9">?</span><span 
class="cmtt-9">id</span><span 
class="cmtt-9">=14949387...05720*</span><span 
class="cmtt-9">s114280</span><span 
class="cmtt-9">*</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">url</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80130r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">site</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">standard</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">profile</span><span 
class="cmtt-9">-</span><span 
class="cmtt-9">request</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80131r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80132r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">Ottawa</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Canada</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Area</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80133r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">country</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80134r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">code</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">ca</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">code</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80135r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">country</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80136r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">location</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80137r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">industry</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">Computer</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Software</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">industry</span><span 
class="cmtt-9">&#x003E;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80138r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x003C;</span><span 
class="cmtt-9">/</span><span 
class="cmtt-9">person</span><span 
class="cmtt-9">&#x003E;</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
    <!--l. 1196--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1196--><p class="indent" >    <a 
 id="x74-80139r34"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-80140"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.34:
  </span><span  
class="content">The
  <span 
class="cmtt-10">DomUtility</span>
  class
  provides
  functions
  to
  parse
  the
  XML
  data
  structure
  provided
  by
  the
  LinkedIn
  API.</span></div><!--tex4ht:label?: x74-80139r5.11 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80141r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80142r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Node</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getSubElement</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Node</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">parent</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80143r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NodeList</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">nodes</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">((</span><span 
class="cmtt-9">Element</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">parent</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getElementsByTagName</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80144r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">nodes</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getLength</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">==</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">0)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80145r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80146r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80147r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">nodes</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">item</span><span 
class="cmtt-9">(0)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80148r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80149r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80150r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Node</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">node</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80151r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Node</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">n</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getSubElement</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">node</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80152r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">n</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">==</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80153r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80154r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80155r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">n</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getTextContent</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80156r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80157r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80158r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Node</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">node</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">subName</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80159r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Node</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">n</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getSubElement</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">node</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">name</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80160r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">n</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">==</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80161r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80162r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80163r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">n</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">subName</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80164r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80165r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80166r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">static</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getString</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Element</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">element</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80167r27"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Document</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">document</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">element</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getOwnerDocument</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80168r28"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DOMImplementationLS</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">domImplLS</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">DOMImplementationLS</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">document</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getImplementation</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80169r29"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LSSerializer</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">serializer</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">domImplLS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">createLSSerializer</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80170r30"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">serializer</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">writeToString</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">element</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80171r31"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80172r32"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1198--><p class="indent" >    From the sample XML extract provided in Listing&#x00A0;<a 
href="#x74-80119r33">5.33<!--tex4ht:ref: lst:linkedin.samplexmlcontact --></a>, we can readily identify the person id
<span 
class="cmtt-10">f7R6wGcblj</span>, the first name <span 
class="cmtt-10">Mike </span>and some other attribute names with associated attribute values. A closer
look reveals the identity of the person to be Mike Milinkovich, a well known character in the Eclipse
community. For each LinkedIn contact this format is parsed in method <span 
class="cmtt-10">readContacts </span>into a DOM
tree<span class="footnote-mark"><a 
href="book93.html#fn19x7"><sup class="textsuperscript">19</sup></a></span><a 
 id="x74-80173f19"></a> .
Using the <span 
class="cmtt-10">DomUtility </span>helper class provided in Listing&#x00A0;<a 
href="#x74-80139r34">5.34<!--tex4ht:ref: lst:mycontacts.server.linkedin.domutil --></a>, these attribute values are then extracted
from this DOM tree and used to update the existing person attributes.
    <!--l. 1212--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1212--><p class="indent" >    <a 
 id="x74-80174r35"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-80175"></a>

  <div class="caption" 
><span class="id">Listing&#x00A0;5.35:
  </span><span  
class="content">The
  <span 
class="cmtt-10">readContacts</span>
  method
  to
  fetch
  the
  users
  connection
  using
  the
  LinkedIn
  API.
  The
  necessary
  access
  token
  is
  created
  in
  method
  <span 
class="cmtt-10">getToken</span>
  based
  on
  the
  information
  stored
  in
  the
  database
  for
  the
  logged
  in
  user.</span></div><!--tex4ht:label?: x74-80174r5.11 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80176r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NodeList</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">readContacts</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Exception</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80177r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">create</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">singned</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">linkedin</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">request</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">and</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">response</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80178r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">OAuthRequest</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">request</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">OAuthRequest</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">Verb</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">GET</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_CONNECTIONS</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80179r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_service</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">signRequest</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">getToken</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">request</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80180r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Response</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">response</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">request</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">send</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80181r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80182r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">parse</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">linkedin</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">response</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">stream</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80183r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DocumentBuilder</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">builder</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">DocumentBuilderFactory</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">newInstance</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">newDocumentBuilder</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80184r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Document</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">document</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">builder</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">parse</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">response</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getStream</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80185r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Element</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">element</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">document</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getDocumentElement</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80186r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80187r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">//</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">basic</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">error</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">handling</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80188r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">element</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getNodeName</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">equals</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">error</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80189r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LOG</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">error</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getString</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">element</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80190r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throw</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">DomUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getString</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">element</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80191r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80192r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80193r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">element</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getChildNodes</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80194r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80195r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80196r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Token</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getToken</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80197r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ServerSession</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getUserId</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80198r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">StringHolder</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">StringHolder</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80199r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">StringHolder</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">StringHolder</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80200r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80201r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">selectInto</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AND</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80202r27"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_TOKEN</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80203r28"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SQL</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">selectInto</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SELECT</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">INTO</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">FROM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">USERS_PARAM</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">WHERE</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AND</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">:</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80204r29"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">param</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LINKEDIN_SECRET</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">NVPair</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">username</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80205r30"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80206r31"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">StringUtility</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">isNullOrEmpty</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80207r32"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throw</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">No</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">valid</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">LinkedIn</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">stored</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">for</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">user</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#8217;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">userName</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">+</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">&#8217;.</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Please</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">re</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">create</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">a</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80208r33"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80209r34"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80210r35"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Token</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">value</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80211r36"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-80212r37"></a></span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1214--><p class="indent" >    Accessing the user&#8217;s LinkedIn contact list is implemented in method <span 
class="cmtt-10">readContacts </span>according to
Listing&#x00A0;<a 
href="#x74-80174r35">5.35<!--tex4ht:ref: lst:mycontacts.server.linkedin.readcontacts --></a>. In this method, a signed OAuth request is first created using the access token
provided by method <span 
class="cmtt-10">getToken</span>. The request specified by constant <span 
class="cmtt-10">LINKEDIN</span><span 
class="cmtt-10">_CONNECTIONS </span>is
defined as <span 
class="cmtt-10">http://api.linkedin.com/v1/people/~/connections</span>. According to the API
specification<span class="footnote-mark"><a 
href="book94.html#fn20x7"><sup class="textsuperscript">20</sup></a></span><a 
 id="x74-80213f20"></a> 
this returns all connections of the user. To sign the request, the access token is retrieved from the
database of the &#8221;My Contact&#8221; application using method <span 
class="cmtt-10">getToken</span>. According to the implementation
provided in Listing&#x00A0;<a 
href="#x74-80174r35">5.35<!--tex4ht:ref: lst:mycontacts.server.linkedin.readcontacts --></a> the user id is first obtained from the user&#8217;s server session. The necessary
parameters to create the access token are then retrieved from the <span 
class="cmtt-10">USERS</span><span 
class="cmtt-10">_PARAM </span>table. We have now
implemented all necessary server services and operations to access the LinkedIn API, to create/refresh
access tokens and to retrieve the users contacts.
    <h3 class="sectionHead"><span class="titlemark">5.12   </span> <a 
 id="x74-810005.12"></a>Fetching Contacts from LinkedIn</h3>
<!--l. 1229--><p class="noindent" ><hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-8100139"></a>
                                                                                 

                                                                                 

<!--l. 1230--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_form_token_1.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_form_token_2.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.39: </span><span  
class="content">Add the form to refresh the LinkedIn access token.</span></div><!--tex4ht:label?: x74-8100139 -->
                                                                                 

                                                                                 
<!--l. 1234--><p class="noindent" ></div><hr class="endfigure">
<!--l. 1236--><p class="indent" >    The last piece that is missing to complete the &#8221;My Contacts&#8221; application is the user interaction for
the LinkedIn integration implemented in the previous section. To allow the user to create/refresh an
access token, we need to implement the refresh token form shown in Figure&#x00A0;<a 
href="#x74-630052">5.2<!--tex4ht:ref: fig:my_contacts_rayo_refresh --></a> at the beginning of this
chapter. To create the form code, we use the <span 
class="cmti-10">New Form </span>wizard of the Scout SDK as shown in
Figure&#x00A0;<a 
href="#x74-8100139">5.39<!--tex4ht:ref: fig:new_form_token --></a>. For the <span 
class="cmti-10">Name </span>field enter a new translated text &#8221;Refresh LinkedIn Token&#8221; and fill <span 
class="cmtt-10">ui.forms</span>
into the <span 
class="cmti-10">Sub Package </span>field field. Then, click the <span 
class="cmcsc-10">N<span 
class="small-caps">e</span><span 
class="small-caps">x</span><span 
class="small-caps">t</span> </span>button to switch to the second wizard step.
Here, deselect the elements that will not be needed for the implementation of the refresh
form according to the right hand side of Figure&#x00A0;<a 
href="#x74-8100139">5.39<!--tex4ht:ref: fig:new_form_token --></a>. Once the form has been created by the
wizard, add the a <span 
class="cmtt-10">Token </span>and a <span 
class="cmtt-10">Secret </span>form variable of type string under the form&#8217;s <span 
class="cmti-10">Variables</span>
folder.
<!--l. 1244--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-8100240"></a>
                                                                                 

                                                                                 

<!--l. 1245--><p class="noindent" ><img 
src="OneDayTutorial/figures/tokenform_securitycode_explorer.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/tokenform_securitycode_properties.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.40: </span><span  
class="content">The token form in the explorer and the properties of the security code field.</span></div><!--tex4ht:label?: x74-8100240 -->
                                                                                 

                                                                                 
<!--l. 1249--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1251--><p class="indent" >    The next step is to add the desired layout and the necessary form fields. First, use the <span 
class="cmti-10">New Form</span>
<span 
class="cmti-10">Field </span>wizard to add a new group box <span 
class="cmtt-10">TokenBox </span>to the <span 
class="cmti-10">MainBox </span>node. And into the <span 
class="cmtt-10">TokenBox </span>add a
&#8221;Security Code&#8221; string field as shown on the left hand side of Figure&#x00A0;<a 
href="#x74-8100240">5.40<!--tex4ht:ref: fig:tokenform_securitycode --></a>. To provide a click-able link
that opens a web browser with the LinkedIn authentication link, add a &#8221;Open Auth URL&#8221; link of type
<span 
class="cmtt-10">LinkButton </span>to the main box. To make the user to first click the authentication link button before he tries
to fill any content into the security code field we initially disable this field. For this, first click on the
security code field in the Scout Explorer and then open the <span 
class="cmti-10">Advanced Properties </span>section of the fields
Scout Object Properties. As shown on the right side of Figure&#x00A0;<a 
href="#x74-8100240">5.40<!--tex4ht:ref: fig:tokenform_securitycode --></a>, deselect the <span 
class="cmti-10">Enabled</span>
property.
    <!--l. 1266--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1266--><p class="indent" >    <a 
 id="x74-81003r36"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-81004"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.36:
     </span><span  
class="content">The
     structure
     of
     the
     refresh
     token
     form.
     The
     security
     code
     field
     gets
     enabled
     in
     method
     <span 
class="cmtt-10">execClickAction</span>
     after
     the
     authentication
     link
     button
     is
     pressed.</span></div><!--tex4ht:label?: x74-81003r5.12 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81005r1"></a></span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">RefreshTokenForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81006r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81007r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">private</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">m_token</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81008r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81009r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">MainBox</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractGroupBox</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81010r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81011r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81012r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TokenBox</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractGroupBox</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81013r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81014r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81015r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SecurityCodeField</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractStringField</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81016r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81017r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81018r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredEnabled</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81019r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">false</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81020r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81021r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81022r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81023r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredLabel</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81024r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">SecurityCode</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81025r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81026r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81027r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81028r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81029r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(20.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81030r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">OpenAuthURLButton</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-81031"></a><span 
class="cmtt-9">AbstractLinkButton</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81032r27"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81033r28"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81034r29"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredLabel</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81035r30"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">OpenAuthURL</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81036r31"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81037r32"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81038r33"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81039r34"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><a 
 id="dx74-81040"></a><span 
class="cmtt-9">execClickAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81041r35"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">[]</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">auth</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">ILinkedInService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getAuthUrl</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81042r36"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setToken</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">auth</span><span 
class="cmtt-9">[0])</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81043r37"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">setSecret</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">auth</span><span 
class="cmtt-9">[1])</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81044r38"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81045r39"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">IShellService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">shellOpen</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">auth</span><span 
class="cmtt-9">[2])</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81046r40"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getSecurityCodeField</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setEnabled</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81047r41"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81048r42"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1268--><p class="indent" >    The implementation of the forms&#8217; structure is provided in Listing&#x00A0;<a 
href="#x74-81003r36">5.36<!--tex4ht:ref: lst:mycontacts.client.forms.refreshtoken --></a>. In the <span 
class="cmtt-10">execClickAction</span>
method of the link button <span 
class="cmtt-10">OpenAuthURLButton </span>the necessary information for the auth link is obtained
from the server. For this, we are using the <span 
class="cmtt-10">getAuthUrl </span>operation implemented in the previous section.
The parameters to create the request token are saved in the form&#8217;s token and secret variables.
Then, the auth link is opened in a web browser with the <span 
class="cmtt-10">shellOpen </span>method of the client&#8217;s
shell service. Finally, after opening the web browser we can enable the security field with
<span 
class="cmtt-10">getSecurityCodeField().setEnabled(true)</span>.
<!--l. 1275--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-8105141"></a>
                                                                                 

                                                                                 

<!--l. 1276--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_menu_refreshtoken_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_menu_refreshtoken.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.41: </span><span  
class="content">Add the menu to open the LinkedIn token form.</span></div><!--tex4ht:label?: x74-8105141 -->
                                                                                 

                                                                                 
<!--l. 1280--><p class="indent" >    </div><hr class="endfigure">
<!--l. 1282--><p class="indent" >    We can now integrate the form to refresh the LinkedIn access token under the applications &#8221;File&#8221;
menu. This is done using the <span 
class="cmti-10">New Menu </span>wizard as shown in Figure&#x00A0;<a 
href="#x74-8105141">5.41<!--tex4ht:ref: fig:new_menu_refreshtoken --></a>. Enter the translated text
&#8221;Refresh LinkedIn Token ...&#8221; into the wizard&#8217;s <span 
class="cmti-10">Name </span>field and pick the element <span 
class="cmti-10">Exit Menu [before] </span>from
the dropdown box of the <span 
class="cmti-10">Sibling </span>field. In the <span 
class="cmti-10">Form to start </span>field select the newly created refresh token
form and use the <span 
class="cmti-10">NewHandler </span>entry in the <span 
class="cmti-10">Form Handler </span>field. To close the wizard, click the <span 
class="cmcsc-10">F<span 
class="small-caps">i</span><span 
class="small-caps">n</span><span 
class="small-caps">i</span><span 
class="small-caps">s</span><span 
class="small-caps">h</span></span>
button.
    <!--l. 1294--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1294--><p class="indent" >    <a 
 id="x74-81052r37"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-81053"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.37:
     </span><span  
class="content">The
     menu
     to
     refresh
     the
     LinkedIn
     token
     starts
     the
     token
     form
     and
     then
     sends
     token
     parameters
     with
     the
     new
     security
     code
     to
     the
     LinkedIn
     backend
     service.</span></div><!--tex4ht:label?: x74-81052r5.12 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81054r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81055r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">RefreshLinkedInToken_Menu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractExtensibleMenu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81056r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81057r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81058r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredText</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81059r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">RefreshLinkedInToken_</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81060r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81061r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81062r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81063r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">boolean</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredEmptySpaceAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81064r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">true</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81065r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81066r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81067r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81068r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">execAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81069r16"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">RefreshTokenForm</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">new</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">RefreshTokenForm</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81070r17"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">startNew</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81071r18"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">waitFor</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81072r19"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">if</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">isFormStored</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81073r20"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getToken</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81074r21"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getSecret</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81075r22"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">securityCode</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">=</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">form</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getSecurityCodeField</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getValue</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81076r23"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">ILinkedInService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">refreshToken</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">token</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">secret</span><span 
class="cmtt-9">,</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">securityCode</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81077r24"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81078r25"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81079r26"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1296--><p class="indent" >    The implementation of the refresh menu is shown in Listing&#x00A0;<a 
href="#x74-81083r38">5.38<!--tex4ht:ref: lst:mycontacts.client.desktop.refreshtokenmenu --></a>. In method <span 
class="cmtt-10">execAction()</span>, we need
to amend the part after starting the refresh token form. If the method <span 
class="cmtt-10">form.isFormStored()</span>
returns <span 
class="cmtt-10">true</span>, the user has modified the secure code field and it is fair to assume that the user
wants to create/refresh his LinkedIn access token. For this, we first retrieve the necessary
parameters to call the backend service operation <span 
class="cmtt-10">refreshToken </span>implemented in the previous
chapter.
<!--l. 1301--><p class="indent" >    <hr class="figure"><div class="figure" 
>
                                                                                 

                                                                                 
<a 
 id="x74-8108242"></a>
                                                                                 

                                                                                 

<!--l. 1302--><p class="noindent" ><img 
src="OneDayTutorial/figures/new_menu_updatecontacts_contextmenu.png" alt="PIC"  
> &#x00A0;     <img 
src="OneDayTutorial/figures/new_menu_updatecontacts.png" alt="PIC"  
>
<br /> <div class="caption" 
><span class="id">Figure&#x00A0;5.42: </span><span  
class="content">Add the menu to update the LinkedIn contacts.</span></div><!--tex4ht:label?: x74-8108242 -->
                                                                                 

                                                                                 
<!--l. 1306--><p class="indent" >    </div><hr class="endfigure">
    <!--l. 1314--><div class="lstinputlisting">
                                                                                 

                                                                                 
<!--l. 1314--><p class="indent" >    <a 
 id="x74-81083r38"></a><hr class="float"><div class="float" 
>
                                                                                 

                                                                                 
<a 
 id="x74-81084"></a>

     <div class="caption" 
><span class="id">Listing&#x00A0;5.38:
     </span><span  
class="content">The
     menu
     to
     update
     the
     stored
     persons
     with
     current
     LinkedIn
     data.</span></div><!--tex4ht:label?: x74-81083r5.12 --><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81085r1"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Order</span><span 
class="cmtt-9">(10.0)</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81086r2"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">public</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">UpdateLinkedInContactsMenu_</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">extends</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">AbstractExtensibleMenu</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81087r3"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81088r4"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81089r5"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">String</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">getConfiguredText</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81090r6"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">return</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">UpdateLinkedInContacts</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81091r7"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81092r8"></a></span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81093r9"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">@Override</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81094r10"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">protected</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">void</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">execAction</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">throws</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">ProcessingException</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">{</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81095r11"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Desktop</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">this</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setStatusText</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">TEXTS</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">get</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">ImportingLinkedIn</span><span 
class="cmtt-9">"</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81096r12"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">SERVICES</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">getService</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">ILinkedInService</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">class</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">updateContacts</span><span 
class="cmtt-9">()</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81097r13"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">Desktop</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">this</span><span 
class="cmtt-9">.</span><span 
class="cmtt-9">setStatusText</span><span 
class="cmtt-9">(</span><span 
class="cmtt-9">null</span><span 
class="cmtt-9">)</span><span 
class="cmtt-9">;</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81098r14"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span><span 
class="cmtt-9">&#x00A0;</span><br /><span class="label"><a 
 id="x74-81099r15"></a></span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">&#x00A0;</span><span 
class="cmtt-9">}</span>
                                                                                 

                                                                                 
    </div><hr class="endfloat" />
    </div>
<!--l. 1316--><p class="indent" >    As the last missing component of the &#8221;My Contacts&#8221; application, we add the menu to fetch the
LinkedIn contacts and update the database accordingly. The menu entry is created as a sub menu of the
&#8221;Tools&#8221; menu. For this, use the new menu wizard on the <span 
class="cmti-10">ToolsMenu </span>node as shown in Figure&#x00A0;<a 
href="#x74-8108242">5.42<!--tex4ht:ref: fig:new_menu_updatecontacts --></a>. The
implementation of the menu&#8217;s <span 
class="cmtt-10">execAction </span>method shown in Listing&#x00A0;<a 
href="#x74-81083r38">5.38<!--tex4ht:ref: lst:mycontacts.client.desktop.refreshtokenmenu --></a> is trivial. We only need to call
the operation of the <span 
class="cmtt-10">LinkedInService </span>implemented in the server part of the &#8221;My Contacts&#8221;
application.
                                                                                 

                                                                                 
                                                                                 

                                                                                 
    <!--l. 103--><div class="crosslinks"><p class="noindent">[<a 
href="bookch5.html" >prev</a>] [<a 
href="bookch5.html#tailbookch5.html" >prev-tail</a>] [<a 
href="bookch6.html" >front</a>] [<a 
href="bookpa1.html#bookch6.html" >up</a>] </p></div>
<!--l. 103--><p class="indent" >    <a 
 id="tailbookch6.html"></a>   
</body></html> 
